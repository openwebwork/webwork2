#!perl
################################################################################
# WeBWorK Online Homework Delivery System
# Copyright &copy; 2000-2023 The WeBWorK Project, https://github.com/openwebwork
#
# This program is free software; you can redistribute it and/or modify it under
# the terms of either: (a) the GNU General Public License as published by the
# Free Software Foundation; either version 2, or (at your option) any later
# version, or (b) the "Artistic License" which comes with this package.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.  See either the GNU General Public License or the
# Artistic License for more details.
################################################################################

# This file is used to set up the default WeBWorK course environment for all
# requests. Values may be overwritten by the course.conf for a specific course.
# All package variables set in this file are added to the course environment.
# If you wish to set a variable here but omit it from the course environment,
# use the "my" keyword. The $webwork_dir variable is set in the WeBWorK Apache
# configuration file (webwork.apache-config) and is available for use here. In
# addition, the $courseName variable holds the name of the current course.

# YOU SHOULD NOT NEED TO EDIT THIS FILE!!
# All site-specific settings such as file locations and web addresses are
# configured in site.conf.  If you want to override any settings in this
# file, you can put a directive in localOverrides.conf.

include("conf/site.conf");
include("VERSION");  # get WW version
# The version of PG is now obtained from the file pg/VERSION
# using code added to CourseEnvironment.pm
# with this one exception include can only read files under the webwork2 directory

################################################################################
# site.conf  should contain basic information about directories and URLs on
# your server
################################################################################

################################################################################
# Mail Settings
################################################################################

# By default, feedback is sent to all users who have permission to
# receive_feedback in a course. If this list is non-empty, feedback is also sent
# to the addresses specified here.
#
# * If you want to disable feedback altogether, leave this empty and set
#   $permissionLevels{submit_feedback} = 'nobody'. This will cause the
#   feedback button to go away as well.
#
# * If you want to send email ONLY to addresses in this list, set
#   $permissionLevels{receive_feedback} = 'nobody'.
#
# It's often useful to set this in the course.conf to change the behavior of
# feedback for a specific course.
#
# Items in this list may be bare addresses, or RFC822 mailboxes, like:
#   'Joe User <joe.user@example.com>'
# The advantage of this form is that the resulting email will include the name
# of the recipient in the "To" field of the email.

$mail{feedbackRecipients}    = [
	#'prof1@yourserver.yourdomain.edu',
	#'prof2@yourserver.yourdomain.edu',
];

# Feedback subject line -- the following escape sequences are recognized:
#
#   %c = course ID
#   %u = user ID
#   %s = set ID
#   %p = problem ID
#   %x = section
#   %r = recitation
#   %% = literal percent sign
#

$mail{feedbackSubjectFormat} = "[WWfeedback] course:%c user:%u set:%s prob:%p sec:%x rec:%r";

# feedbackVerbosity:
#  0: send only the feedback comment and context link
#  1: as in 0, plus user, set, problem, and PG data
#  2: as in 1, plus the problem environment (debugging data)
$mail{feedbackVerbosity}     = 1;

# Should the studentID be included in the feedback email when feedbackVerbosity > 0:
# The default is yes
$blockStudentIDinFeedback = 0;

# Defines the initial height of the Mail Merge editor window
# FIXME: should this be here? it's UI, not mail
# FIXME: replace this with the auto-size method that TWiki uses
$mail{editor_window_rows}    = 15;

##################################################################################
# Customizing the action of the "Email your instructor" button
##################################################################################

# Customizing the behavior for this button is best done by copying the lines below, entering them
# in the localOverrides.conf file and making the desired modifications.
# Then you will not need to update these modifications
# when you download a new version of WeBWorK.

# Use this to customize the text of the feedback button.
$feedback_button_name = "Email Instructor";

# If this value is true, feedback will only be sent to users with the same
# section as the user initiating the feedback.
$feedback_by_section = 0;

# If the variable below is set to a non-empty value (i.e. in course.conf), WeBWorK's usual
# email feedback mechanism  will be replaced with a link to the given URL.
# See also $feedback_button_name, above.

$courseURLs{feedbackURL} = "";

# If the variable below is set to a non-empty value (i.e. in course.conf),
# WeBWorK's usual email feedback mechanism  will be replaced with a link to the given URL and
# a POST request with information about the problem including the HTML rendering
# of the problem will be sent to that URL.
# See also $feedback_button_name, above.

#$courseURLs{feedbackFormURL} = "http://www.mathnerds.com/MathNerds/mmn/SDS/askQuestion.aspx";  #"http://www.tipjar.com/cgi-bin/test";
$courseURLs{feedbackFormURL} = "";

################################################################################
# Theme
################################################################################

$defaultTheme = "math4";

# The institution logo should be an image file in the theme's images folder
$institutionLogo = 'maa_logo.svg';
$institutionURL  = 'http://www.maa.org';
$institutionName = 'MAA (Mathematical Association of America)';

################################################################################
# Achievements
################################################################################
$achievementsEnabled = 0;
$achievementItemsEnabled = 0;
$achievementPointsPerProblem = 5;
$achievementPointsPerProblemReduced = 3;
$achievementPreambleFile = "preamble.at";
$achievementExcludeSet = [];
$mail{achievementEmailFrom} = '';

################################################################################
# Achievements
################################################################################
$showCourseHomeworkTotals = 1;

################################################################################
# Editor
################################################################################
$editor{author} = '';
$editor{authorInstitute} = '';
$editor{textTitle} = '';
$editor{textEdition} = '';
$editor{textAuthor} = '';

################################################################################
# Enter key behavior
################################################################################
$pg{options}{enterKey} = 'preview';

################################################################################
# showMeAnother
################################################################################
# switch to enable showMeAnother button
$pg{options}{enableShowMeAnother} = 0;
# default number of attempts before enabling show me another
$pg{options}{showMeAnotherDefault} = -1;
# maximum number of times (per problem) the button can be used
$pg{options}{showMeAnotherMaxReps} = 3;
# maximum number of attempts to check if changing the problem seed
# changes the problem
$pg{options}{showMeAnotherGeneratesDifferentProblem} = 5;
# showMeAnother options
$pg{options}{showMeAnother}=[
"SMAcheckAnswers",
"SMAshowSolutions",
"SMAshowCorrect",
"SMAshowHints",
];

################################################################################
# showHintsAfter
################################################################################
# Number of attempts after which hints will be shown to a student.
# Set to -1 to disable hints.
$pg{options}{showHintsAfter} = 2;

###############################################################################
# periodicRandomization
################################################################################
# switch to enable periodic re-randomization
$pg{options}{enablePeriodicRandomization} = 0;
# course-wide default period for re-randomization, should be an integer
# the value of 0 disables re-randomization
$pg{options}{periodicRandomizationPeriod} = 5;
# Show the correct answer after a student's last attempt at the current version
# and before a new version is requested.
$pg{options}{showCorrectOnRandomize} = 0;

###############################################################################
# answer feedback options
################################################################################

# If set to 1, then answer feedback is automatically shown when returning to an
# answered problem or after answers are available for the assignment. This is
# present in problems when a student opens the problem without the student
# needing to click the "Check Answers" button.
$pg{options}{automaticAnswerFeedback} = 1;

# If set to 1, then a "Reveal" button must be clicked to reveal correct answers
# even after the answer date.
$pg{options}{correctRevealBtnAlways} = 0;

################################################################################
# Single Problem Grader
################################################################################
# When using the single problem grader, should the problem score be entered in as
#   Percent - Percent value
#   Point   - Point value
#   Both    - Show inputs for both percent and point values.
# Note, the problem score is always saved as a percent, so point values will be
# rounded to the nearest whole percent.
$problemGraderScore = 'Percent';

################################################################################
# Waive Explanations
################################################################################
# switch to remove explanation essay block from questions that have one
$pg{specialPGEnvironmentVars}{waiveExplanations} = 0;

################################################################################
# Language
################################################################################

# This must be a language code for a language that is supported by webwork.
# Note that this is also used for the locale for date/time formats.
# Check the directory lib/WeBWorK/Localize to see which languages are
# currently supported (e.g. en, es, fr, he-IL, tr, zh-HK).
$language = "en";

# $perProblemLangAndDirSettingMode controls how and whether LANG and/or DIR
#    attributes are added to the DIV element enveloping a problem
#    which helps handle proper display of problems with a text direction
#    different from that used course-wide. Ex: enables English problems to
#    be displayed properly in a Hebrew course site, which helps select problems
#    to be translated to Hebrew.
$perProblemLangAndDirSettingMode = "force::ltr";

################################################################################
# Student Date Format
################################################################################

# This is the format of the dates displayed for students.  This can be created
# from the strftime patterns documented at https://metacpan.org/pod/DateTime#strftime-Patterns,
# or can be one of the localizable DateTime::Locale::FromData formats
# 'datetime_format_short', 'datetime_format_medium', 'datetime_format_long', or
# 'datetime_format_full'.  See https://metacpan.org/pod/DateTime::Locale::FromData.
$studentDateDisplayFormat = 'datetime_format_long';

################################################################################
# System-wide locations (directories and URLs)
################################################################################

# The root directory, set by webwork_root variable in Apache configuration.
$webworkDirs{root}          = "$webwork_dir";

# Location of system-wide data files.
$webworkDirs{DATA}          = "$webworkDirs{root}/DATA";

# Used for temporary storage of uploaded files.
$webworkDirs{uploadCache}   = "$webworkDirs{DATA}/uploads";

# Location of utility programs.
$webworkDirs{bin}           = "$webworkDirs{root}/bin";

# Location of configuration files.
$webworkDirs{conf}          = "$webworkDirs{root}/conf";

# Location of assets (tex, pg, themes)
$webworkDirs{assets}        = "$webworkDirs{root}/assets";

# Location of the distribution hardcopy themes.
$webworkDirs{hardcopyThemes} = "$webworkDirs{assets}/hardcopyThemes";

# Location of course directories.
$webworkDirs{courses}       = "$webwork_courses_dir" || "$webworkDirs{root}/courses";

# Contains log files.
$webworkDirs{logs}          = "$webworkDirs{root}/logs";

# Contains non-web-accessible temporary files, such as TeX working directories.
$webworkDirs{tmp}           = "$webworkDirs{root}/tmp";

# The (absolute) destinations of symbolic links that are OK for the FileManager to follow.
#   (any subdirectory of these is a valid target for a symbolic link.)
# For example:
#    $webworkDirs{valid_symlinks} = ["$webworkDirs{courses}/modelCourse/templates","/ww2/common/sets"];
$webworkDirs{valid_symlinks}   = [];

# Location of the webwork2.sty and its dependencies used for hardcopy generation.
$webworkDirs{assetsTex}        = "$webworkDirs{assets}/tex";

################################################################################
##### The following locations are web-accessible.
################################################################################

# The root URL (usually /webwork2), set by <Location> in Apache configuration.
$webworkURLs{root}          = "$webwork_url";

# Location of system-wide web-accessible files, such as equation images, and
# help files.
$webworkDirs{htdocs}        = "$webwork_htdocs_dir" || "$webworkDirs{root}/htdocs";
$webworkURLs{htdocs}        = "$webwork_htdocs_url";

# Location of web-accessible temporary files, such as equation images.
# These two should be set in localOverrides.conf -- not here since this can be overwritten by new versions.
$webworkDirs{htdocs_temp}   = "$webworkDirs{htdocs}/tmp";
$webworkURLs{htdocs_temp}   = "$webworkURLs{htdocs}/tmp";

# Location of cached equation images.
$webworkDirs{equationCache} = "$webworkDirs{htdocs_temp}/equations";
$webworkURLs{equationCache} = "$webworkURLs{htdocs_temp}/equations";

# Location of theme templates.
$webworkDirs{themes}     = "$webworkDirs{htdocs}/themes";

# Location of localization directory.
$webworkDirs{localize} = "$webworkDirs{root}/lib/WeBWorK/Localize";

# URL of general WeBWorK documentation.
$webworkURLs{docs}          = "https://webwork.maa.org";

# URLs for new issues in Github.
$webworkURLs{webwork2BugReporter} = "https://github.com/openwebwork/webwork2/issues/new";
$webworkURLs{OPLBugReporter}      = "https://github.com/openwebwork/webwork-open-problem-library/issues/new";

# URL of WeBWorK on GitHub
$webworkURLs{GitHub}        = "https://github.com/openwebwork";

# Registration form URL, security signup mail address
$webworkURLs{serverRegForm} = "https://forms.gle/vrqpKiRHritnQNf37";
$webworkURLs{wwSecurityAnnounce} = "https://groups.google.com/g/ww-security-announce";
$webworkSecListManagers = 'ww-security-announce+managers@googlegroups.com';

# URLs in the Wiki
$webworkURLs{WikiMain}      = "https://webwork.maa.org/wiki/";
$webworkURLs{SiteMap}       = "https://webwork.maa.org/wiki/WeBWorK_Sites";

# URL for help buttons on the PGProblemEditor pages:
$webworkURLs{MathObjectsHelpURL}      ='https://webwork.maa.org/wiki/Category:MathObjects';
$webworkURLs{PGLabHelpURL}            ='https://demo.webwork.rochester.edu/webwork2/wikiExamples/MathObjectsLabs2/2?login_practice_user=true';
$webworkURLs{PGMLHelpURL}             ='https://demo.webwork.rochester.edu/webwork2/cervone_course/PGML/1?login_practice_user=true';
$webworkURLs{AuthorHelpURL}           ='https://webwork.maa.org/wiki/Category:Authors';

# Location of CSS
# $webworkURLs{stylesheet}    = "$webworkURLs{htdocs}/css/${defaultTheme}.css";
# this is never used -- changing the theme from the config panel
# doesn't appear to reset the theme in time?
# It's better to refer directly to the .css file in the system.template
# <link rel="stylesheet" type="text/css" href="<!--#url type="webwork" name="htdocs"-->/css/math.css"/>

################################################################################
# Defaults for course-specific locations (directories and URLs)
################################################################################

# The root directory of the current course. (The ID of the current course is
# available in $courseName.)
$courseDirs{root}        = "$webworkDirs{courses}/$courseName";

# Location of course-specific data files.
$courseDirs{DATA}        = "$courseDirs{root}/DATA";

# Location of course HTML files, passed to PG.
$courseDirs{html}        = "$courseDirs{root}/html";
$courseURLs{html}        = "$webwork_courses_url/$courseName";

# Location of course image files, passed to PG.
$courseDirs{html_images} = "$courseDirs{html}/images";

# Location of web-accessible, course-specific temporary files, like static and
# dynamically-generated PG graphics.
$courseDirs{html_temp}   = "$webworkDirs{htdocs_temp}/$courseName";
$courseURLs{html_temp}   = "$webworkURLs{htdocs_temp}/$courseName";

# Location of course-specific logs, like the transaction log.
$courseDirs{logs}        = "$courseDirs{root}/logs";

# Location of scoring files.
$courseDirs{scoring}     = "$courseDirs{root}/scoring";

# Location of PG templates and set definition files.
$courseDirs{templates}   = "$courseDirs{root}/templates";

# Location of hardcopy theme files.
$courseDirs{hardcopyThemes} = "$courseDirs{templates}/hardcopyThemes";

# Location of course achievement files.
$courseDirs{achievements}              = "$courseDirs{templates}/achievements";
$courseDirs{achievement_notifications} = "$courseDirs{achievements}/notifications";
$courseDirs{achievements_html}         = "$courseDirs{html}/achievements";                     #contains badge icons
$courseURLs{achievements}              = "$courseURLs{html}/achievements";

# Location of course-specific macro files.
$courseDirs{macros}      = "$courseDirs{templates}/macros";

# Location of mail-merge templates.
$courseDirs{email}       = "$courseDirs{templates}/email";

# Location of temporary editing files.
$courseDirs{tmpEditFileDir}  = "$courseDirs{templates}/tmpEdit";

# mail merge status directory
$courseDirs{mailmerge}   = "$courseDirs{DATA}/mailmerge";

################################################################################
# System-wide files
################################################################################

# Location of this file.
$webworkFiles{environment}                      = "$webworkDirs{conf}/defaults.conf";

# Flat-file database used to protect against MD5 hash collisions. TeX equations
# are hashed to determine the name of the image file. There is a tiny chance of
# a collision between two TeX strings. This file allows for that. However, this
# is slow, so most people chose not to worry about it. Set this to "" if you
# don't want to use the equation cache file.
$webworkFiles{equationCacheDB}                  = ""; # "$webworkDirs{DATA}/equationcache";

################################################################################
# Hardcopy Theme
################################################################################

# Hardcopy themes are .xml files.  See assets/hardcopThemes/README.md for details
# about their structure.  The site themes are files in $webworkDirs{hardcopyThemes}.
# $hardcopyThemes identifies which site themes are enabled.
$hardcopyThemes = [
	'basic.xml',
	'basicTwoCol.xml',
	'boxed.xml',
	'boxedRows.xml',
	'boxedTwoCol.xml',
	'classic.xml',
	'classicTwoCol.xml',
	'empty.xml',
	#'hebrew.xml',
	#'hebrewTwoCol.xml',
	'oneColumn.xml',
	'twoColumn.xml',
];

# A course may have additional themes in $courseDirs{hardcopyThemes}.  All such
# "course" hardcopy themes are effectively enabled and offered for use when
# selecting a hardcopy theme.  You can move such files or rename them to not
# have a .xml extension if you don't want them to be offered for use.

# If a course hardcopy theme has the same name as a site hardcopy theme, the
# course hardcopy theme is the one that is used.

# Default hardcopy themes (should either be an enabled site theme or a theme in
# the course hardcopyThemes folder
$hardcopyTheme = 'twoColumn.xml';
$hardcopyThemePGEditor = 'empty.xml';

################################################################################
# Hardcopy snippets are used in constructing a TeX file for hardcopy output.
# They should contain TeX code unless otherwise noted.
################################################################################

# The setHeader precedes each set in hardcopy output. It is a PG file.
# This is the default file which is used if a specific files is not selected
$webworkFiles{hardcopySnippets}{setHeader}     = "$webworkDirs{assets}/pg/defaultSetHeader.pg";

################################################################################
##### Screen snippets are used when displaying problem sets on the screen.
################################################################################

# The set header is displayed on the problem set page. It is a PG file.
# This is the default file which is used if a specific files is not selected
$webworkFiles{screenSnippets}{setHeader}         = "$webworkDirs{assets}/pg/defaultSetHeader.pg";

# A PG template for creation of new problems.
$webworkFiles{screenSnippets}{blankProblem}    = "$webworkDirs{assets}/pg/newProblem.pg";

# A site info "message of the day" file
$webworkFiles{site_info}                       = "$webworkDirs{htdocs}/site_info.txt";

################################################################################
# Course-specific files
################################################################################

# The course configuration file.
$courseFiles{environment} = "$courseDirs{root}/course.conf";

# The course simple configuration file (holds web-based configuration).
$courseFiles{simpleConfig} = "$courseDirs{root}/simple.conf";

# File contents are displayed after login, on the problem sets page. Path given
# here is relative to the templates directory.
$courseFiles{course_info} = "course_info.txt";

# File contents are displayed on the login page. Path given here is relative to
# the templates directory.
$courseFiles{login_info}  = "login_info.txt";

# These course specific files cannot be edited from the File Manager for safety reasons except
# by an administrator.  These are paths relative to the course directory.
$uneditableCourseFiles = [
	'simple.conf',
	'course.conf',
];

# Additional library buttons can be added to the Library Browser (SetMaker.pm)
# by adding the libraries you want to the following line.  For each key=>value
# in the list, if a directory (or link to a directory) with name 'key' appears
# in the templates directory, then a button with name 'value' will be placed at
# the top of the problem browser.  (No button will appear if there is no
# directory or link with the given name in the templates directory.)  For
# example,
#
#     $courseFiles{problibs} = {rochester => "Rochester", asu => "ASU"};
#
# would add two buttons, one for the Rochester library and one for the ASU
# library, provided templates/rochester and templates/asu exists either as
# subdirectories or links to other directories. The "OPL Directory" button
# activated below gives access to all the directories in the National
# Problem Library.
#
$courseFiles{problibs}    = {
	Library          => "OPL Directory",
	Contrib          => "Contrib", # remember to create link from Contrib to Contrib
	                               # library directory
	capaLibrary      => "CAPA",    # remember to create link from capaLibrary to CAPA
	                               # in contrib
};

################################################################################
# Status system
################################################################################

# This is the default status given to new students and students with invalid
# or missing statuses.
$default_status = "Enrolled";

# The first abbreviation in the abbreviations list is the canonical
# abbreviation, and will be used when setting the status value in a user record
# or an exported classlist file.
#
# Results are undefined if more than one status has the same abbreviation.
#
# The four behaviors that are controlled by status are:
#   allow_course_access   => is this user allowed to log in?
#   include_in_assignment => is this user included when assigning as set to "all" users?
#   include_in_stats      => is this user included in statistical reports?
#   include_in_email      => is this user included in emails sent to the class?
#   include_in_scoring    => is this user included in score reports?

%statuses = (
	Enrolled => {
		abbrevs => [qw/ C c current enrolled /],
		behaviors => [qw/ allow_course_access include_in_assignment include_in_stats include_in_email include_in_scoring /],
	},
	Audit => {
		abbrevs => [qw/ A a audit /],
		behaviors => [qw/ allow_course_access include_in_assignment include_in_stats include_in_email /],
	},
	Observer => {
		abbrevs => [qw/ O o observer /],
		behaviors => [qw/ allow_course_access include_in_assignment /],
	},
	Drop => {
		abbrevs => [qw/ D d drop withdraw /],
		behaviors => [qw/  /],
	},
	Proctor => {
		abbrevs => [qw/ P p proctor /],
		behaviors => [qw/  /],
	},
);

################################################################################
# Database options
################################################################################

# Database schemas are defined in the file conf/database.conf and stored in the
# hash %dbLayouts. The standard schema is called "sql_single";

include( "./conf/database.conf.dist");  # always include database.conf.dist

                                    # in the rare case where you want local overrides
                                    # you can place include("conf/database.conf") in
                                    # the database.conf.dist file
# this change is meant to help alleviate the common mistake of forgetting to update the
# database.conf file when changing WW versions.

# Select the default database layout. This can be overridden in the course.conf
# file of a particular course. The only database layout supported in WW 2.1.4
# and up is "sql_single".
$dbLayoutName = "sql_single";

# This sets the symbol "dbLayout" as an alias for the selected database layout.
*dbLayout     = $dbLayouts{$dbLayoutName};

# This sets the max course id length.  It might need to be changed depending
# on what database tables are present.  Mysql allows a max table length of 64
# characters.  With the ${course_id}_global_user_achievement table that means
# the max ${course_id} is exactly 40 characters.

$maxCourseIdLength = 40;

# Reference:  https://dev.mysql.com/doc/refman/8.0/en/identifier-length.html

################################################################################
# Problem library options
################################################################################
#
# The problemLibrary configuration data should now be set in localOverrides.conf

# For configuration instructions, see:
# https://webwork.maa.org/wiki/Open_Problem_Library
# The directory containing the open problem library files.
# Set the root to "" if no problem

#RE-CONFIGURE problemLibrary values in localOverrides.conf
# if these defaults are not correct.
#################################################
$problemLibrary{root}       = "/opt/webwork/libraries/webwork-open-problem-library/OpenProblemLibrary";
$contribLibrary{root}       = "/opt/webwork/libraries/webwork-open-problem-library/Contrib";
$problemLibrary{version}    = "2.5";
###########################################################

# Problem Library SQL database connection information
$problemLibrary_db = {
        dbsource => $database_dsn,
        user     => $database_username,
        passwd   => $database_password,
        storage_engine => 'MYISAM',
};

$problemLibrary{tree} = 'library-directory-tree.json';

# These flags control if statistics on opl problems are shown in the library
# browser.  If you want to include local statistics you will need to
# run webwork2/bin/update-OPL-statistics on a regular basis.
$problemLibrary{showLibraryLocalStats} = 1;
# This flag controls whether global statistics will be displayed
$problemLibrary{showLibraryGlobalStats} = 1;

################################################################################
# Logs
################################################################################


# Logs data about how long it takes to process problems. (Do not confuse this
# with the /other/ timing log which can be set by WeBWorK::Timing and is used
# for benchmarking system performance in general. At some point, this timing
# mechanism will be deprecated in favor of the WeBWorK::Timing mechanism.)
$webworkFiles{logs}{timing}         = "$webworkDirs{logs}/timing.log";

# Logs data about how long it takes to process problems. (Do not confuse this
# with the /other/ timing log which can be set by WeBWorK::Timing and is used
# for benchmarking system performance in general. At some point, this timing
# mechanism will be deprecated in favor of the WeBWorK::Timing mechanism.)
$webworkFiles{logs}{render_timing}         = "$webworkDirs{logs}/render_timing.log";

# Logs courses created via the web-based Course Administration module.
$webworkFiles{logs}{hosted_courses} = "$webworkDirs{logs}/hosted_courses.log";

# The transaction log contains data from each recorded answer submission. This
# is useful if the database becomes corrupted.
$webworkFiles{logs}{transaction}    = "$webworkDirs{logs}/${courseName}_transaction.log";

# The answer log stores a history of all users' submitted answers.
$courseFiles{logs}{answer_log}      = "$courseDirs{logs}/answer.log";

# Log logins.
$courseFiles{logs}{login_log}       = "$courseDirs{logs}/login.log";

# Log for almost every click.  By default it is the empty string, which
# turns this log off.  If you want it turned on, we suggest
#                "$courseDirs{logs}/activity.log"
# When turned on, this log can get quite large.
$courseFiles{logs}{activity_log} = '';

################################################################################
# Site defaults (Usually overridden in localOverrides.conf)
################################################################################

# The default_copy_from_course is used by default when creating a new course.
# Its templates folder, html folder, course.conf file, and simple.conf file
# might be copied into a new course. This course might not be a true course;
# it might only have a directory structure and no presense in the database.
# If it is a real course, then also its title, institution, non-student users,
# achievements, and sets can be copied.
$siteDefaults{default_copy_from_course} ="modelCourse";

# Provide a list of model courses which are not real courses, but from which
# the templates for a new course can be copied. This list helps exclude such
# non-real courses when that is appopriate.
$modelCoursesForCopy = [ "modelCourse" ];

################################################################################
# Authentication system
################################################################################

# FIXME This mechanism is a little awkward and probably should be merged with
# the dblayout selection system somehow.

# Select the authentication module to use for normal logins.
#
# If this value is a string, the given authentication module will be used
# regardless of the database layout. If it is a hash, the database layout name
# will be looked up in the hash and the resulting value will be used as the
# authentication module. The special hash key "*" is used if no entry for the
# current database layout is found.
# If this value is a sequence of strings or hashes, then each
# string or hash in the sequence will be successively tested to see if it
# provides a module that can handle
# the authentication request (by calling the module's
#   sub  request_has_data_for_this_verification_module ).
# The first module that responds affirmatively will be used.
#
#
$authen{user_module} = {
	# sql_moodle => "WeBWorK::Authen::Moodle",
	# sql_ldap   => "WeBWorK::Authen::LDAP",
	"*" => "WeBWorK::Authen::Basic_TheLastOption",
};

# Select the authentication module to use for proctor logins.
# A string or a hash is accepted, as above.
$authen{proctor_module} = "WeBWorK::Authen::Proctor";

################################################################################
# Authorization system (Make local overrides in localOverrides.conf )
################################################################################

# this section lets you define which groups of users can perform which actions.

# this hash maps a numeric permission level to the name of a role. the number
# assigned to a role is significant -- roles with higher numbers are considered
# "more privileged", and are included when that role is listed for a privilege
# below.
#
%userRoles = (
	guest         => -5,
	student       => 0,
	login_proctor => 2,
	grade_proctor => 3,
	ta            => 5,
	professor     => 10,
	admin         => 20,
	nobody        => 99999999, # insure that nobody comes at the end
);

# this hash maps operations to the roles that are allowed to perform those
# operations. If a single role is listed, the role listed and any role with
# a higher permission level (in the %userRoles hash) will be allowed to perform
# the operation. If the role is undefined, no users will be allowed to perform
# the operation. The receive_feedback permission level can be also be an array
# reference containing a list of roles. If that is the case, only those exact
# roles are allowed to reeceive feedback emails.
#
%permissionLevels = (
	login                          => "guest",
	navigation_allowed             => "guest",
	report_bugs                    => "ta",
	submit_feedback                => "student",
	change_password                => "student",
	change_email_address           => "student",
	change_pg_display_settings     => "student",

	proctor_quiz_login             => "login_proctor",
	proctor_quiz_grade             => "grade_proctor",
	view_proctored_tests           => "student",
	view_hidden_work               => "ta",

	view_multiple_sets             => "ta",
	view_unopened_sets             => "ta",
	view_hidden_sets               => "ta",
	view_answers                   => "ta",
	view_ip_restricted_sets        => "ta",

	become_student                 => "professor",
	access_instructor_tools        => "ta",
	score_sets                     => "professor",
	send_mail                      => "professor",
	receive_feedback               => ['ta', 'professor', 'admin'],

	create_and_delete_problem_sets => "professor",
	assign_problem_sets            => "professor",
	modify_problem_sets            => "professor",
	modify_student_data            => "professor",
	modify_classlist_files         => "professor",
	modify_set_def_files           => "professor",
	modify_scoring_files           => "professor",
	modify_problem_template_files  => "professor",
	manage_course_files            => "professor",
	edit_achievements              => "professor",
	create_and_delete_courses      => "admin",
	modify_tags                    => "admin",
	edit_restricted_files          => "admin",

	##### Behavior of the interactive problem processor #####
	show_correct_answers_before_answer_date         => "ta",
	show_solutions_before_answer_date               => "ta",
	avoid_recording_answers                         =>  "nobody", # record the grade/status/state of everyone's entries.
	                                                              # Setting this to "ta" would record grade/status/state
	                                                              # for students but not TA's or professors;
	                                                              # TA's and above could avoid having their answers recorded.

	# controls if old answers can be shown
	can_show_old_answers                            => "student",
	check_answers_before_open_date                  => "ta",
	check_answers_after_open_date_with_attempts     => "guest",
	check_answers_after_open_date_without_attempts  => "guest",
	check_answers_after_due_date                    => "guest",
	check_answers_after_answer_date                 => "guest",
	can_check_and_submit_answers                    => "ta",
	can_use_show_me_another_early                   => "ta",
	create_new_set_version_when_acting_as_student   => undef,
	print_path_to_problem                           => "professor", # see "Special" PG environment variables
	always_show_hint                                => "professor",
	always_show_solution                            => "professor",
	record_set_version_answers_when_acting_as_student => undef,
	record_answers_when_acting_as_student           => undef,
	# "record_answers_when_acting_as_student" takes precedence
	# over the following for professors acting as students:
	record_answers_before_open_date                 => undef,
	record_answers_after_open_date_with_attempts    => "student",
	record_answers_after_open_date_without_attempts => undef,
	record_answers_after_due_date                   => undef,
	record_answers_after_answer_date                => undef,
	dont_log_past_answers                           => undef,
	                                                # controls logging of the responses to a question
	                                                # in the past answer data base
	                                                # and in the myCourse/logs/answer_log file.
	                                                # Activities of users with this permission enabled are not entered
	                                                # in these logs.  This might be used when collecting student data
	                                                # to avoid contaminating the data with TA and instructor activities.
	                                                # The professor setting means that  professor's answers are not logged or
	                                                # saved in the past answer database.

	# PG debugging
	show_resource_info                              => "admin",
	view_problem_debugging_info                     => "ta",
	show_pg_info                                    => "admin",
	show_answer_hash_info                           => "admin",
	show_answer_group_info                          => "admin",

	##### Behavior of the Hardcopy Processor #####
	download_hardcopy_multiuser  => "ta",
	download_hardcopy_multiset   => "ta",
	download_hardcopy_view_errors =>"professor",
	download_hardcopy_format_pdf => "guest",
	download_hardcopy_format_tex => "ta",
	download_hardcopy_change_theme=> "ta",

	##### Permission to edit a row from the setting table #####
	##### must have form setting_table_[key]              #####
	setting_table_courseTitle      => "professor",
);

# This is the default permission level given to new students and students with
# invalid or missing permission levels.
$default_permission_level = $userRoles{student};

################################################################################
# Session options
################################################################################

# $sessionKeyTimeout defines seconds of inactivity before a key expires
$sessionKeyTimeout = 60*30;

# $sessionKeyLength defines the length (in characters) of the session key
$sessionKeyLength = 32;

# @sessionKeyChars lists the legal session key characters
@sessionKeyChars = ('A'..'Z', 'a'..'z', '0'..'9');

# Practice users are users who's names start with $practiceUser
# (you can comment this out to remove practice user support)
$practiceUserPrefix = "practice";

# Option for gateway tests; $gatewayGracePeriod is the time in seconds
# after the official due date during which we'll still grade the test
$gatewayGracePeriod = 120;

################################################################################
# Session Management
################################################################################

# Session management can be handled either using the key database, the
# traditional method, or by using signed session cookies.

# Setting $session_management_via="key" uses the key database for session
# management. If password authentication is used, then a user can opt to use a
# session cookie with a duration determined by the $CookieLifeTime setting below
# by checking the "Remember Me" checkbox on the login page.

# Setting $session_management_via="session_cookies" uses a session cookie to
# manage the session. Note that even in this case a key is stored in the
# database which is compared to the key stored in the session cookie.

# Note that the key database method is less secure as the key must be embeded in
# the page and added as a url parameter in order to maintain the session. These
# things can be accessed by malicious javascript. The session cookies are http
# only cookies which can not be accessed via javascript.

$session_management_via = "session_cookie";

################################################################################
# Cookie control settings
################################################################################

# Set the value of the samesite attribute of the session cookie:
# See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite
# Notes about the $CookieSameSite options:
# The "None" setting should only be used with HTTPS and when $CookieSecure is
# set to 1 below. The "None" setting is also less secure and can allow certain
# types of cross-site attacks.  The "Strict" setting can break the links in the
# system generated feedback emails when read in a web mail client.  Due to those
# factors, the "Lax" setting is probably the optimal choice for typical webwork2
# servers.
$CookieSameSite = "Lax";

# Set the value of the secure cookie attribute.
# The default is 0, as 1 will not work without https.
$CookieSecure = 0;

# The CookieLifeTime setting determines how long the browser should retain the
# cookie. See https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie.
# The CookieLifeTime value should be numeric and in seconds, or should be set to
# "session", in which case the cookie will expire when the browser session ends
# (a "session cookie"). Note that a value of 0 also means the cookie will expire
# when the browser session ends. The default value is 7 days.
$CookieLifeTime = 604800;

################################################################################
# WeBWorK Caliper
################################################################################

# Caliper is disabled by default.  See localOverrides.conf.dist for configuration
# options when enabling Caliper.
$caliper{enabled} = 0;

################################################################################
# PG subsystem options
################################################################################

# List of enabled screen display modes. Comment out any modes you don't wish to
# make available for use.
# The first uncommented option is the default for instructors rendering problems
# in the homework sets editor.
$pg{displayModes} = [
	"MathJax",    # render TeX math expressions on the client side using
	              # MathJax; we strongly recommend people install and use
	              # MathJax, and it is required if you want to use MathView
	"images",     # display math expressions as images generated by dvipng
#	"plainText",  # display raw TeX for math expressions
];

# List of additional display modes for the PG editor only.
$pg{additionalPGEditorDisplayModes} = [
	"tex",    # display tex code for a rendered problem
	"PTX",    # display static PreTeXt XML for a rendered problem
];

##########################################################################################
#### Default settings for homework editor pages
##########################################################################################

# Whether the homework editor pages should show options for conditional release
$options{enableConditionalRelease} = 0;

# In the set manager, how deep to search within templates for .def files.
# Note that this does not apply to the Library and Contrib directories.
# Those directories are not searched in any case (see below).
# 0 means only within templates.
$options{setDefSearchDepth} = 4;

# In the set manager, also list OPL or Contrib set defintion files.   Note
# that the directories are not searched, but these lists are loaded from the
# files htdocs/DATA/library-set-defs.json and htdocs/DATA/contrib-set-defs.json
# which are generated by running bin/generate-OPL-set-def-lists.pl (which is
# also run if you run bin/OPL-update).
$options{useOPLdefFiles} = 1;
$options{useContribDefFiles} = 1;

##########################################################################################
#### Default settings for the problem editor pages
##########################################################################################

# This sets if the PG editor should use a js based "codemirror" editor or
# just a textarea
$options{PGCodeMirror} = 1;

###########################################################################################
#### Default settings for the PG translator
#### This section controls the display of equations, HINTS, answers, SOLUTIONS,
#### "sticky_answers" a.k.a. showOldAnswers,
#### coloring of answer blanks and the numeric display of entered answers.
###########################################################################################

# Default display mode. Should be listed above (uncomment only one).
$pg{options}{displayMode}        = "MathJax";

# The default grader to use, if a problem doesn't specify.
$pg{options}{grader}             = "avg_problem_grader";

# Fill in answer blanks with the student's last answer by default?
$pg{options}{showOldAnswers}     = 1;

# Note for the useMathQuill and useMathView options, the one that is actually used is ultimately
# determined by the entryAssist PG special environment variable.  Furthermore the user may disable the chosen method and
# fall back to a basic html input in the user settings if the user has the change_pg_display_settings permission.

# Default for showing the MathView preview system.
$pg{options}{useMathView}        = 1;
# This is the operations file to use for mathview,  each contains a different locale.
$pg{options}{mathViewLocale}     = "mv_locale_us.js";

# Default for showing the MathQuill preview system.
$pg{options}{useMathQuill}     = 1;

$pg{options}{showAnsGroupInfo}      = 0;
$pg{options}{showAnsHashInfo}       = 0;
$pg{options}{showPGInfo}            = 0;

# By default hints and solutions are ALWAYS shown for professors (and above) so that they
# can check hints and solutions easily and make corrections.
# To disable this feature set the permission levels
# always_show_hint to "nobody" (by default this is "professor")
# and always_show_solution to "nobody" (by default this is "professor")
# This is done in the %permissions section above.

# Display the "Entered" column which automatically shows the evaluated student answer, e.g. 1 if student input is sin(pi/2).
# If this is set to 0, e.g. to save space in the response area, the student can still see their evaluated answer by hovering
# the mouse pointer over the typeset version of their answer
$pg{options}{showEvaluatedAnswers}      = 1;

# Catch translation warnings internally.  This must be done since the translator is now run in a subprocess and do not
# propogate to the main process.  So this really should never be set to 0.
$pg{options}{catchWarnings}      = 1;

##### Settings for various display modes

# "images" mode has several settings:
$pg{displayModeOptions}{images} = {
	# Determines the method used to align images in output. Can be any valid value for the css vertical-align rule such
	# as 'baseline' or 'middle'.
	dvipng_align => 'baseline',

	# If dbsource is set to a nonempty value, then this database connection information will be used to store dvipng
	# depths.  It is assumed that the 'depths' table exists in the database.
	dvipng_depth_db => {
		dbsource => $database_dsn,
		user     => $database_username,
		passwd   => $database_password,
	},
};

##### Directories used by PG

# The root of the PG directory tree (from pg_dir set in conf/webwork2.mojolicious.yml).
$pg{directories}{root}      = "$pg_dir";
$pg{directories}{lib}       = "$pg{directories}{root}/lib";
$pg{directories}{macros}    = "$pg{directories}{root}/macros";
$pg{directories}{assets}    = "$pg{directories}{root}/assets";
$pg{directories}{assetsTex} = "$pg{directories}{assets}/tex";

#
#  The macro file search path.  Each directory in this list is searched
#  (in this order) by loadMacros() when it looks for a .pl file.
#
$pg{directories}{macrosPath} = [
   ".",                     # search the problem file's directory
   $courseDirs{macros},
   $pg{directories}{macros},
   "$pg{directories}{macros}/answers",
   "$pg{directories}{macros}/capa",
   "$pg{directories}{macros}/contexts",
   "$pg{directories}{macros}/core",
   "$pg{directories}{macros}/graph",
   "$pg{directories}{macros}/math",
   "$pg{directories}{macros}/misc",
   "$pg{directories}{macros}/parsers",
   "$pg{directories}{macros}/ui",
   "$pg{directories}{macros}/deprecated",
];

# Directories to search for auxiliary html files.
$pg{directories}{htmlPath} = [
	".",
	$courseDirs{html},
	$webworkDirs{htdocs},
];

# Directories to search for image files.
$pg{directories}{imagesPath} = [
	".",
	"$courseDirs{html}/images",
	"$webworkDirs{htdocs}/images",
];

# Contains context-sensitive pg help files.
$pg{URLs}{localHelpURL} = "$pg_htdocs_url/helpFiles";

##### "Special" PG environment variables. (Stuff that doesn't fit in anywhere else.)

# Users for whom to print the file name of the PG file being processed.
$pg{specialPGEnvironmentVars}{PRINT_FILE_NAMES_FOR} = [ "professor", ];

# File names are also printed for anyone with this permission or higher
$pg{specialPGEnvironmentVars}{PRINT_FILE_NAMES_PERMISSION_LEVEL} =
	$userRoles{ $permissionLevels{print_path_to_problem} };

# whether to use javascript for rendering Live3D graphs
$pg{specialPGEnvironmentVars}{use_javascript_for_live3d} = 1;

# Binary that the PGtikz.pl and PGlateximage.pl macros will use to create svg images.
# This should be either 'pdf2svg' or 'dvisvgm'.
$pg{specialPGEnvironmentVars}{latexImageSVGMethod} = "pdf2svg";

# When ImageMagick is used for image conversions, this sets the default options.
# See https://imagemagick.org/script/convert.php for a full list of options.
# convert will be called as:
# convert <input options> file.ext1 <output options> file.ext2
$pg{specialPGEnvironmentVars}{latexImageConvertOptions} = {input => {density => 300}, output => {quality => 100}};

   #  set the flags immediately above in the $pg{options} section above -- not here.

# Locations of CAPA resources. (Only necessary if you need to use converted CAPA
# problems.)
################################################################################
# "Special" PG environment variables. (Stuff that doesn't fit in anywhere else.)
################################################################################

 $pg{specialPGEnvironmentVars}{CAPA_Tools}             = "$courseDirs{templates}/Contrib/CAPA/macros/CAPA_Tools/",
 $pg{specialPGEnvironmentVars}{CAPA_MCTools}           = "$courseDirs{templates}/Contrib/CAPA/macros/CAPA_MCTools/",
 $pg{specialPGEnvironmentVars}{CAPA_GraphicsDirectory} = "$courseDirs{templates}/Contrib/CAPA/CAPA_Graphics/",
 $pg{specialPGEnvironmentVars}{CAPA_Graphics_URL}      = "$webworkURLs{htdocs}/CAPA_Graphics/",

 push @{$pg{directories}{macrosPath}},
   "$courseDirs{templates}/Contrib/CAPA/macros/CAPA_Tools",
   "$courseDirs{templates}/Contrib/CAPA/macros/CAPA_MCTools";

 # The link Contrib in the course templates directory should point to ../webwork-open-problem-library/Contrib
 # The link webwork2/htdocs/CAPA_Graphics should point to ../webwork-open-problem-library/Contrib/CAPA/macros/CAPA_graphics
# Size in pixels of dynamically-generated images, i.e. graphs.
$pg{specialPGEnvironmentVars}{onTheFlyImageSize}      = 400,

# To disable the Parser-based versions of num_cmp and fun_cmp, and use the
# original versions instead, set this value to 1.
$pg{specialPGEnvironmentVars}{useOldAnswerMacros} = 0;

# Determines whether or not MathObjects contexts will parse the alternative tokens
# listed in the "alternatives" property (mostly for unicode alternatives for parse tokens).
$pg{specialPGEnvironmentVars}{parseAlternatives} = 0;

# Determines whether or not the MathObjects parser will convert the Full Width Unicode block
# (U+FF01 to U+FF5E) to their corresponding ASCII characters (U+0021 to U+007E) automatically.
$pg{specialPGEnvironmentVars}{convertFullWidthCharacters} = 0;


# Strings to insert at the start and end of the body of a problem
#  (at beginproblem() and ENDDOCUMENT) in various modes.  More display modes
#  can be added if different behaviours are desired (e.g., HTML_dpng,
#  HTML_asciimath, etc.).  These parts are not used in the Library browser.

$pg{specialPGEnvironmentVars}{problemPreamble} = { TeX => '', HTML=> '' };
$pg{specialPGEnvironmentVars}{problemPostamble} = { TeX => '', HTML=>'' };

# this snippet checks to see if Moodle has already called MathJax
# $pg{specialPGEnvironmentVars}{problemPreamble} = { TeX => '', HTML=> <<END_PREAMBLE };
#
#	<script type="text/x-mathjax-config">
#	if (MathJax.Hub.Startup.params.config && MathJax.Hub.config.config.length) {
#	    MathJax.Hub.Config({
#	      config: [],
#	      skipStartupTypeset: false
#	    });
#	  }
#	</script>
# END_PREAMBLE

#
# $pg{specialPGEnvironmentVars}{problemPostamble} = { TeX => '', HTML=> <<END_POSTAMBLE };
#
#
# END_POSTAMBLE

# Note!  problemPreamble and problemPostamble are becoming depreciated,
#        so you probably wouldn't use them
# To have the problem body indented and boxed, uncomment:
#$pg{specialPGEnvironmentVars}{problemPreamble}{HTML} = qq!<div class="problem-content">\n!;
#$pg{specialPGEnvironmentVars}{problemPostamble}{HTML}= qq!</div>\n!;

# To have the problem body indented and boxed, uncomment:
# $pg{specialPGEnvironmentVars}{problemPreamble}{HTML} = '<BLOCKQUOTE>
#    <TABLE BORDER=1 CELLSPACING=1 CELLPADDING=15 BGCOLOR=#E8E8E8><TR><TD>';
# $pg{specialPGEnvironmentVars}{problemPostamble}{HTML} = '</TD></TR></TABLE>
#     </BLOCKQUOTE>';

##### PG modules to load

# The first item of each list is the module to load. The remaining items are
# additional packages to import.
#
# That is: If you wish to include a module MyModule.pm which depends
# on additional modules Dependency1.pm and Dependency2.pm, these
# should appear as [qw(Mymodule.pm, Dependency1.pm, Dependency2.pm)]

${pg}{modules} = [
	[qw(Encode)],
	[qw(Encode::Encoding)],
	[qw(HTML::Parser)],
	[qw(HTML::Entities)],
	[qw(DynaLoader)],
	[qw(Encode)],
	[qw(Exporter )],
	[qw(GD)],
	[qw(AlgParser AlgParserWithImplicitExpand Expr ExprWithImplicitExpand utf8)],
	[qw(AnswerHash AnswerEvaluator)],
	[qw(LaTeXImage)],
	[qw(WWPlot)],    # required by Circle (and others)
	[qw(Circle)],
	[qw(Class::Accessor)],
	[qw(Complex)],
	[qw(Complex1)],
	[qw(Distributions)],
	[qw(Fraction)],
	[qw(Fun)],
	[qw(Hermite)],
	[qw(Label)],
	[qw(ChoiceList)],
	[qw(Match)],
	[qw(MatrixReal1)],    # required by Matrix
	[qw(Matrix)],
	[qw(Multiple)],
	[qw(PGrandom)],
	[qw(Regression)],
	[qw(Select)],
	[qw(Units)],
	[qw(VectorField)],
	[qw(Parser Value)],
	[qw(Parser::Legacy)],
	[qw(Statistics)],
	[qw(Chromatic)],      # for Northern Arizona graph problems
	[qw(Applet MIME::Base64)],
	[qw(PGcore PGalias PGresource PGloadfiles PGanswergroup PGresponsegroup Tie::IxHash)],
	[qw(Locale::Maketext)],
	[qw(WeBWorK::PG::Localize)],
	[qw(JSON)],
	[qw(Rserve Class::Tiny IO::Handle)],
	[qw(DragNDrop)],
	[qw(Types::Serialiser)],
	[qw(strict)],
];

##### Problem creation defaults

# The default weight (also called value) of a problem to use when using the
# Library Browser, Problem Editor, or Sets Manager to add problems to a set
# or when this value is left blank in an imported set definition file.
$problemDefaults{value} = 1;

# The default max_attempts for a problem to use when using the
# Library Browser, Problem Editor, or Sets Manager to add problems to a set
# or when this value is left blank in an imported set definition file.  Note that
# setting this to -1 gives students unlimited attempts.
$problemDefaults{max_attempts} = -1;

# The default showMeAnother for a problem to use when using the
# Library Browser, Problem Editor, or Sets Manager to add problems to a set
# or when this value is left blank in an imported set definition file.  Note that
# setting this to -1 disables the showMeAnother button
$problemDefaults{showMeAnother} = -2;

#The default attempts to open children value to use when adding
# a problem.  This only matters for JITAR sets
$problemDefaults{att_to_open_children} = 1;

#The default counts for parent grade problem value to use when adding
# a problem.  This only matters for JITAR sets
$problemDefaults{counts_parent_grade} = 0;

# The default prPeriod value (re-randomization period) to use for the newly created problem.
# It is suggested to use the value of -1, which means that the course-wide setting would be used
# Setting this to -1 defaults to the use of course-wide settings (suggested)
# Setting this to 0 disables periodic randomization regardless of the course-wide setting
# Setting this to a positive value will override the course-wide setting
$problemDefaults{prPeriod} = -1;

# The default number of attempts after which to show hints for newly created problems.
# It is suggested to use the value of -2, which means that the course-wide setting would be used
# Setting this to -2 defaults to the use of course-wide settings (suggested)
# Setting this to -1 disables hints in problems.
# Setting this to 0 or more will show hints after that number of attempts.
$problemDefaults{showHintsAfter} = -2;

##### Answer evaluatior defaults

$pg{ansEvalDefaults} = {
	functAbsTolDefault            => .001,
	functLLimitDefault            => .0000001,
	functMaxConstantOfIntegration => 1E8,
	functNumOfPoints              => 3,
	functRelPercentTolDefault     => .1,
	functULimitDefault            => .9999999,
	functVarDefault               => "x",
	functZeroLevelDefault         => 1E-14,
	functZeroLevelTolDefault      => 1E-12,
	numAbsTolDefault              => .001,
	numFormatDefault              => "",
	numRelPercentTolDefault       => .1,
	numZeroLevelDefault           => 1E-14,
	numZeroLevelTolDefault        => 1E-12,
	useBaseTenLog                 => 0,
	defaultDisplayMatrixStyle     => "[s]",  # left delimiter, middle line delimiters, right delimiter
	enableReducedScoring          => 0,
	reducedScoringPeriod          => 0, # Default length of Reduced Scoring Period in minutes
	reducedScoringValue           => .75, # Percent of score students receive in Reduced Scoring Period
	assignOpenPriorToDue          => 14400, # a number of minutes (default is 10 days)
	answersOpenAfterDueDate       => 2880 # number of minutes (default is 2 days)
};



################################################################################
# Compatibility
################################################################################

# Define the old names for the various "root" variables.
$webworkRoot    = $webworkDirs{root};
$webworkURLRoot = $webworkURLs{root};
$pgRoot         = $pg{directories}{root};



################################################################################
# Webservices
################################################################################
# The following options only apply to actions performed via requests to $webwork_url/instructor_rpc.
$webservices = {
	# Enable createCourse, addUser, dropUser, deleteUser, editUser, and changeUserPassword
	enableCourseActions => 0,
	# Enable logging of course actions via webservices.  Will log when courses are created and when students are added,
	# dropped, deleted, edited, or have password changed.
	enableCourseActionsLog => 0,
	courseActionsLogfile   => "$webworkDirs{logs}/courseactions.log",
};

###############################################################################
# Math entry assistance
###############################################################################

$pg{specialPGEnvironmentVars}{entryAssist} = 'MathQuill';

###############################################################################
# Default Set settings
###############################################################################

# Time of day that newly created sets are set to be due.  This should not be a
# localized string, and is never used for display purposes.
$pg{timeAssignDue} = '11:59pm';

# Number of minutes prior to due date that newly created sets
# are set to open.
$pg{assignOpenPriorToDue} = 10080;

# Number of minutes after due date that newly created sets are
# set for answers to be made available;
$pg{answersOpenAfterDueDate} = 2880;

###############################################################################
# Progress Bar switch
###############################################################################
$pg{options}{enableProgressBar} = 1;

################################################################################
# Site wide overrides are entered into the file localOverrides.conf
################################################################################
# This is loaded before the $ConfigValues definition, so that the if values of
# $hardcopyThemes are overridden in localOverrides.conf, then those values are
# used and shown in the course configuration.
include("conf/localOverrides.conf");

################################################################################
# WeBWorK::ContentGenerator::Instructor::Config
################################################################################

# Configuration data
# It is organized by section.  The allowable types are
#  'text' for a text string (no quotes allowed),
#  'number' for a number,
#  'list' for a list of text strings,
#  'permission' for a permission value,
#  'boolean' for variables which really hold 0/1 values as flags,
#  'timezone' for a time zone,
#  'time' for a time,
#  'checkboxlist' for variables that hold a list of values which can be independently picked yes/no as checkboxes,
#  'popuplist' for variables that hold a list of values to be selected from.

# var key indicates this is a course environment variable
# setting key indicates this is a setting from the course's setting table in the database
#   and in this case, only text type is presently supported since there are not presently
#   other types of data in the setting table that could conceivably be up for manual reassignment

# Localization Info:  The doc strings in this portion are reproduced in
# lib/WeBWorK/Localize.pm solely so that xgettext.pl will
# include them when creating .pot files.
# If you change these strings you should make the corresponding changes in
# Localize.pm

# This is a dummy function used to mark strings in the config values for localization.
# The method in lib/WeBWorK/Utils.pm cannot be used here.
sub x { return @_; }

$ConfigValues = [
	[
		x('General'),
		{
			setting => 'courseTitle',
			doc     => 'Title for course displayed on the Assignments page',
			type    => 'text'
		},
		{
			var  => 'courseFiles{course_info}',
			doc  => x('Name of course information file'),
			doc2 => x(
				'The name of course information file (located in the templates directory). '
					. 'Its contents are displayed in the right panel next to the list of homework sets.'
			),
			type => 'text'
		},
		{
			var  => 'defaultTheme',
			doc  => x('Theme (refresh page after saving changes to reveal new theme.)'),
			doc2 => x(
				'There is one main theme to choose from: math4. It has three variants: math4-green, math4-red, and '
					. 'math4-yellow. The theme specifies a unified look and feel for the WeBWorK course web pages.'
			),
			values  => [qw(math4 math4-green math4-red)],
			type    => 'popuplist',
			hashVar => '{defaultTheme}'
		},
		{
			var    => 'language',
			doc    => x('Language (refresh page after saving changes to reveal new language.)'),
			doc2   => x('WeBWorK currently has translations for the languages listed in the course configuration.'),
			values => [qw(en tr es fr zh-HK he)],
			type   => 'popuplist'
		},
		{
			var  => 'studentDateDisplayFormat',
			doc  => x('Format of dates that are displayed for students'),
			doc2 => x(
				'This is the format of the dates displayed for students.  This can be created from '
					. '<a href="https://metacpan.org/pod/DateTime#strftime-Patterns">strftime patterns</a>, e.g., '
					. '<span class="text-nowrap">"%a %b %d at %l:%M%P"</span>, or can be one of the '
					. '<a href="https://metacpan.org/pod/DateTime::Locale::FromData">localizable formats</a> '
					. '"datetime_format_short", "datetime_format_medium", "datetime_format_long", or '
					. '"datetime_format_full".'
			),
			type => 'text'
		},
		{
			var  => 'perProblemLangAndDirSettingMode',
			doc  => x('Mode in which the LANG and DIR settings for a single problem are determined.'),
			doc2 => x(
				'<p>Mode in which the LANG and DIR settings for a single problem are determined.</p><p>The system will '
					. 'set the LANGuage attribute to either a value determined from the problem, a course-wide '
					. 'default, or the system default, depending on the mode selected. The tag will only be added to '
					. 'the DIV enclosing the problem if it is different than the value which should be set in the main '
					. 'HTML tag set for the entire course based on the course language.</p><p>There are two options '
					. 'for the DIRection attribute: "ltr" for left-to-write scripts, and "rtl" for right-to-left '
					. 'scripts like Arabic and Hebrew.</p><p>The DIRection attribute is needed to trigger proper '
					. 'display of the question text when the problem text-direction is different than that used by the '
					. 'current language of the course. For example, English problems from the library browser would '
					. 'display improperly in RTL mode for a Hebrew course, unless the problen Direction is set to LTR.'
					. '</p><p>The feature to set a problem language and direction was only added in 2018 to the PG '
					. 'language, so most problems will not declare their language, and the system needs to fall back '
					. 'to determining the language and direction in a different manner. The OPL itself is all English, '
					. 'so the system wide fallback is to en-US in LTR mode.</p><p>Since the defaults fall back '
					. 'to the LTR direction, most sites should be fine with the "auto::" mode, but may want to select '
					. 'the one which matches their course language. The mode "force::ltr" would also be an option for '
					. 'a course which runs into trouble with the "auto" modes.</p><p>Modes:</p><ul><li>"none" prevents '
					. 'any additional LANG and/or DIR tag being added. The browser will use the main setting which was '
					. 'applied to the entire HTML page. This is likely to cause trouble when a problem of the other '
					. 'direction is displayed.</li><li>"auto::" allows the system to make the settings based on the '
					. 'language and direction reported by the problem (a new feature, so not set in almost all '
					. 'existing problems) and falling back to the expected default of en-US in LTR mode. </li>'
					. '<li>"auto:LangCode:Dir" allows the system to make the settings based on the language and '
					. 'direction reported by the problem (a new feature, so not set in almost all existing problems) '
					. 'but falling back to the language with the given LangCode and the direction Dir when problem '
					. 'settings are not available from PG.</li><li>"auto::Dir" for problems without PG settings, this '
					. 'will use the default en=english language, but force the direction to Dir. Problems with PG '
					. 'settings will get those settings.</li><li>"auto:LangCode:" for problems without PG settings, '
					. 'this will use the default LTR direction, but will set the language to LangCode.Problems with PG '
					. 'settings will get those settings.</li><li>"force:LangCode:Dir" will <b>ignore</b> any setting '
					. 'made by the PG code of the problem, and will force the system to set the language with the '
					. 'given LangCode and the direction to Dir for <b>all</b> problems.</li><li>"force::Dir" will '
					. '<b>ignore</b> any setting made by the PG code of the problem, and will force the system to set '
					. 'the direction to Dir for <b>all</b> problems, but will avoid setting any language attribute for '
					. 'individual problem.</li></ul>'
			),
			values => [
				qw(none auto:: force::ltr force::rtl force:en:ltr auto:en:ltr force:tr:ltr auto:tr:ltr force:es:ltr
					auto:es:ltr force:fr:ltr auto:fr:ltr force:zh_hk:ltr auto:zh_hk:ltr force:he:rtl auto:he:rtl)
			],
			type => 'popuplist'
		},
		{
			var  => 'sessionKeyTimeout',
			doc  => x('Inactivity time before a user is required to login again'),
			doc2 => x(
				'Length of time, in seconds, a user has to be inactive before he is required to login again. '
					. 'This value should be entered as a number, so as 3600 instead of 60*60 for one hour.'
			),
			type => 'number'
		},
		{
			var  => 'siteDefaults{timezone}',
			doc  => x('Timezone for the course'),
			doc2 => x(
				'<p>Some servers handle courses taking place in different timezones.  If this course is not showing '
					. 'the correct timezone, enter the correct value here.  The format consists of unix times, such '
					. 'as "America/New_York", "America/Chicago", "America/Denver", "America/Phoenix" or '
					. '"America/Los_Angeles".</p>Complete list: '
					. '<a href="http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones">TimeZoneFiles</a>'
			),
			type    => 'timezone',
			hashVar => '{siteDefaults}->{timezone}'
		},
		{
			var => 'hardcopyThemes',
			doc => x('Enabled Site Hardcopy Themes'),
			doc2 => x(
				'Choose which of the site PDF hardcopy themes are available.  In addition to the themes selected here, '
					. 'all themes in the course hardcopyThemes folder will be available.  Your selection must be saved '
					. 'and then the page must be reloaded before the new list of enabled themes will be reflected '
					. 'in the selections that follows.'
			),
			values  => [qw(empty.xml)],
			type   => 'checkboxlist',
			min    => 1,
			hashVar => '{hardcopyThemes}'
		},
		{
			var     => 'hardcopyTheme',
			doc     => x('Hardcopy Theme'),
			doc2    => x('Choose a layout/styling theme for PDF hardcopy production.'),
			values  => [qw(empty.xml)],
			type    => 'popuplist',
			hashVar => '{hardcopyTheme}'
		},
		{
			var     => 'hardcopyThemePGEditor',
			doc     => x('Hardcopy Theme for Problem Editor'),
			doc2    => x('Choose a layout/styling theme for PDF hardcopy production from the Prooblem Editor.'),
			values  => [qw(empty.xml)],
			type    => 'popuplist',
			hashVar => '{hardcopyThemePGEditor}'
		},
		{
			var  => 'showCourseHomeworkTotals',
			doc  => x('Show Total Homework Grade on Grades Page'),
			doc2 => x(
				'When this is on students will see a line on the Grades page which has their total cumulative '
					. 'homework score.  This score includes all sets assigned to the student.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{options}{enableProgressBar}',
			doc  => x('Enable Progress Bar and current problem highlighting'),
			doc2 => x(
				'A switch to govern the use of a Progress Bar for the student; this also enables/disables the '
					. 'highlighting of the current problem in the side bar, and whether it is correct (&#x2713;), '
					. 'in progress (&hellip;), incorrect (&#x2717;), or unattempted (no symbol).'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{timeAssignDue}',
			doc  => x('Default Time that the Assignment is Due'),
			doc2 => x(
				'The time of the day that the assignment is due.  This can be changed on an individual basis, '
					. 'but WeBWorK will use this value for default when a set is created.'
			),
			type    => 'time',
			hashVar => '{pg}->{timeAssignDue}'
		},
		{
			var  => 'pg{assignOpenPriorToDue}',
			doc  => x('Default Amount of Time (in minutes) before Due Date that the Assignment is Open'),
			doc2 => x(
				'The amount of time (in minutes) before the due date when the assignment is opened.  You can change '
					. 'this for individual homework, but WeBWorK will use this value when a set is created.'
			),
			type    => 'number',
			hashVar => '{pg}->{assignOpenPriorToDue}'
		},
		{
			var  => 'pg{answersOpenAfterDueDate}',
			doc  => x('Default Amount of Time (in minutes) after Due Date that Answers are Open'),
			doc2 => x(
				'The amount of time (in minutes) after the due date that the Answers are available to student to '
					. 'view.  You can change this for individual homework, but WeBWorK will use this value when a set '
					. 'is created.'
			),
			type    => 'number',
			hashVar => '{pg}->{answersOpenAfterDueDate}'
		},
	],
	[
		x('Optional Modules'),
		{
			var  => 'achievementsEnabled',
			doc  => x('Enable Course Achievements'),
			doc2 => x(
				'Activiating this will enable Mathchievements for webwork.  Mathchievements can be managed '
					. 'by using the Achievements Manager link.'
			),
			type => 'boolean'
		},
		{
			var  => 'achievementPointsPerProblem',
			doc  => x('Achievement Points Per Problem'),
			doc2 => x('This is the number of achievement points given to each user for completing a problem.'),
			type => 'number'
		},
		{
			var  => 'achievementPointsPerProblemReduced',
			doc  => x('Achievement Points Per Problem in Reduced Scoring Period'),
			doc2 => x(
				'This is the number of achievement points given to each user for completing a problem if the '
					. 'problem is in a set that is in the reduced scoring period.'
			),
			type => 'number'
		},
		{
			var  => 'achievementItemsEnabled',
			doc  => x('Enable Achievement Rewards'),
			doc2 => x(
				'Activating this will enable achievement rewards. This feature allows students to earn rewards by '
					. 'completing achievements that allow them to affect their homework in a limited way.'
			),
			type => 'boolean'
		},
		{
			var  => 'achievementExcludeSet',
			doc  => x('List of sets excluded from achievements'),
			doc2 => x(
				'Comma separated list of set names that are excluded from all achievements. '
					. 'No achievement points and badges can be earned for submitting problems in these sets. '
					. 'Note that underscores (_) must be used for spaces in set names.'
			),
			type => 'list'
		},
		{
			var  => 'mail{achievementEmailFrom}',
			doc  => x('Email address to use when sending Achievement notifications.'),
			doc2 => x(
				'This email address will be used as the sender for achievement notifications. '
				. 'Achievement notifications will not be sent unless this is set.'
			),
			width => 45,
			type  => 'text'
		},
		{
			var  => 'options{enableConditionalRelease}',
			doc  => x('Enable Conditional Release'),
			doc2 => x(
				'Enables the use of the conditional release system.  To use conditional release you need to specify a '
					. 'list of set names on the Problem Set Detail Page, along with a minimum score.  Students will '
					. 'not be able to access that homework set until they have achieved the minimum score on all of '
					. 'the listed sets.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{ansEvalDefaults}{enableReducedScoring}',
			doc  => x('Enable Reduced Scoring'),
			doc2 => x(
				'<p>This sets whether the Reduced Scoring system will be enabled.  If enabled you will need to set the '
					. 'default length of the reduced scoring period and the value of work done in the reduced scoring '
					. 'period below.</p><p>To use this, you also have to enable Reduced Scoring for individual '
					. 'assignments and set their Reduced Scoring Dates by editing the set data.</p><p>This works with '
					. 'the avg_problem_grader (which is the the default grader) and the std_problem_grader (the all '
					. 'or nothing grader).  It will work with custom graders if they are written appropriately.</p>'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{ansEvalDefaults}{reducedScoringValue}',
			doc  => x('Value of work done in Reduced Scoring Period'),
			doc2 => x(
				'<p>After the Reduced Scoring Date all additional work done by the student counts at a reduced rate. '
					. 'Here is where you set the reduced rate which must be a percentage. For example if this value '
					. 'is 50% and a student views a problem during the Reduced Scoring Period, they will see the '
					. 'message "You are in the Reduced Scoring Period: All additional work done counts 50% of the '
					. 'original." </p><p>To use this, you also have to enable Reduced Scoring and set the Reduced '
					. 'Scoring Date for individual assignments by editing the set data using the Sets Manager.</p>'
					. '<p>This works with the avg_problem_grader (which is the the default grader) and the '
					. 'std_problem_grader (the all or nothing grader). It will work with custom graders if they '
					. 'are written appropriately.</p>'
			),
			labels => {
				'0.1'  => '10%',
				'0.15' => '15%',
				'0.2'  => '20%',
				'0.25' => '25%',
				'0.3'  => '30%',
				'0.35' => '35%',
				'0.4'  => '40%',
				'0.45' => '45%',
				'0.5'  => '50%',
				'0.55' => '55%',
				'0.6'  => '60%',
				'0.65' => '65%',
				'0.7'  => '70%',
				'0.75' => '75%',
				'0.8'  => '80%',
				'0.85' => '85%',
				'0.9'  => '90%',
				'0.95' => '95%',
				'1'    => '100%'
			},
			values => [qw(1 0.95 0.9 0.85 0.8 0.75 0.7 0.65 0.6 0.55 0.5 0.45 0.4 0.35 0.3 0.25 0.2 0.15 0.1)],
			type   => 'popuplist'
		},
		{
			var  => 'pg{ansEvalDefaults}{reducedScoringPeriod}',
			doc  => x('Default Length of Reduced Scoring Period in minutes'),
			doc2 => x(
				'The Reduced Scoring Period is the default period before the due date during which all additional work '
					. 'done by the student counts at a reduced rate. When enabling reduced scoring for a set the '
					. 'reduced scoring date will be set to the due date minus this number. The reduced scoring date '
					. 'can then be changed. If the Reduced Scoring is enabled and if it is after the reduced scoring '
					. 'date, but before the due date, a message like "This assignment has a Reduced Scoring Period '
					. 'that begins 11/08/2009 at 06:17pm EST and ends on the due date, 11/10/2009 at 06:17pm EST. '
					. 'During this period all additional work done counts 50% of the original." will be displayed.'
			),
			type => 'number'
		},
		{
			var  => 'pg{options}{enableShowMeAnother}',
			doc  => x('Enable Show Me Another button'),
			doc2 => x(
				'Enables use of the Show Me Another button, which offers the student a newly-seeded version '
					. 'of the current problem, complete with solution (if it exists for that problem).'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{options}{showMeAnotherDefault}',
			doc  => x('Default number of attempts before Show Me Another can be used (-1 => Never)'),
			doc2 => x(
				'This is the default number of attempts before show me another becomes available to students.  '
					. 'It can be set to -1 to disable show me another by default.'
			),
			type => 'number'
		},
		{
			var  => 'pg{options}{showMeAnotherMaxReps}',
			doc  => x('Maximum times Show me Another can be used per problem (-1 => unlimited)'),
			doc2 => x(
				'The Maximum number of times Show me Another can be used per problem by a student. '
					. 'If set to -1 then there is no limit to the number of times that Show Me Another can be used.'
			),
			type => 'number'
		},
		{
			var  => 'pg{options}{showMeAnother}',
			doc  => x('List of options for Show Me Another button'),
			doc2 => x(
				'<ul><li><b>SMAcheckAnswers</b>: enables the Check Answers button <i>for the new problem</i> when '
					. 'Show Me Another is clicked</li><li><b>SMAshowSolutions</b>: shows walk-through solution '
					. '<i>for the new problem</i> when Show Me Another is clicked; a check is done first to make '
					. 'sure that a solution exists </li><li><b>SMAshowCorrect</b>: correct answers <i>for the new '
					. 'problem</i> can be viewed when Show Me Another is clicked; note that <b>SMAcheckAnswers</b>'
					. 'needs to be enabled at the same time</li><li><b>SMAshowHints</b>: show hints <i>for the new '
					. 'problem</i> (assuming they exist)</li></ul>Note: there is very little point enabling the '
					. 'button unless you check at least one of these options - the students would simply see a new '
					. 'version that they can not attempt or learn from.'
			),
			min    => 0,
			values => [ "SMAcheckAnswers", "SMAshowSolutions", "SMAshowCorrect", "SMAshowHints" ],
			type   => 'checkboxlist'
		},
		{
			var  => 'pg{options}{enablePeriodicRandomization}',
			doc  => x('Enable periodic re-randomization of problems'),
			doc2 => x(
				'Enables periodic re-randomization of problems after a given number of attempts. Student would have '
					. 'to click Request New Version to obtain new version of the problem and to continue working on '
					. 'the problem'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{options}{periodicRandomizationPeriod}',
			doc  => x('The default number of attempts between re-randomization of the problems ( 0 => never)'),
			doc2 => x('The default number of attempts before the problem is re-randomized. ( 0 => never )'),
			type => 'number'
		},
		{
			var  => 'pg{options}{showCorrectOnRandomize}',
			doc  => x('Show the correct answer to the current problem before re-randomization.'),
			doc2 => x(
				'Show the correct answer to the current problem on the last attempt before a new version is '
					. 'requested.'
			),
			type => 'boolean'
		},
	],
	[
		x('Permissions'),
		{
			var  => 'permissionLevels{login}',
			doc  => x('Allowed to login to the course'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{change_password}',
			doc  => x('Allowed to change their password'),
			doc2 => x(
				'Users at this level and higher are allowed to change their password. '
					. 'Normally guest users are not allowed to change their password.'
			),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{become_student}',
			doc  => x('Allowed to <em>act as</em> another user'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{submit_feedback}',
			doc  => x('Can email instructor'),
			doc2 => x('Only this permission level and higher get buttons for sending email to the instructor.'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{record_answers_when_acting_as_student}',
			doc  => x('Can submit answers for a student'),
			doc2 =>
				x('When acting as a student, this permission level and higher can submit answers for that student.'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{report_bugs}',
			doc  => x('Can report bugs'),
			doc2 => x(
				'Users with at least this permission level get a link in the left panel for reporting bugs to the '
					. 'bug tracking system at bugs.webwork.maa.org.'
			),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{change_email_address}',
			doc  => x('Allowed to change their email address'),
			doc2 => x(
				'Users at this level and higher are allowed to change their email address. Normally guest users are '
					. 'not allowed to change the email address since it does not make sense to send email to '
					. 'anonymous accounts.'
			),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{change_pg_display_settings}',
			doc  => x('Allowed to change display settings used in pg problems'),
			doc2 => x(
				'Users at this level and higher are allowed to change display settings used in pg problems.'
					. 'Note that if it is expected that there will be students that have vision impairments and '
					. 'MathQuill is enabled to assist with answer entry, then you should not set this permission to a '
					. 'level above student as those students may need to disable MathQuill.'
			),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{view_answers}',
			doc  => x('Allowed to view past answers'),
			doc2 => x('These users and higher get the "Show Past Answers" button on the problem page.'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{view_unopened_sets}',
			doc  => x('Allowed to view problems in sets which are not open yet'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{show_correct_answers_before_answer_date}',
			doc  => x('Allowed to see the correct answers before the answer date'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{show_solutions_before_answer_date}',
			doc  => x('Allowed to see solutions before the answer date'),
			type => 'permission'
		},
		{
			var  => 'permissionLevels{can_show_old_answers}',
			doc  => x('Can show old answers'),
			doc2 => x(
				'When viewing a problem, WeBWorK usually puts the previously submitted answer in the answer blank.  '
					. 'Below this level, old answers are never shown.  Typically, that is the desired behaviour for '
					. 'guest accounts.'
			),
			type => 'permission'
		},
		{ var => 'permissionLevels{navigation_allowed}',
		  doc => 'Allowed to view course home page',
		  doc2 => 'If a user does not have this permission, then the user will not be allowed to navigate to the '
			. 'course home page, i.e., the Assignments page.  This should only be used for a course when LTI '
			. 'authentication is used, and is most useful when LTIGradeMode is set to homework.  In this case the '
			. 'Assignments page is not useful and can even be confusing to students.  To use this feature set '
			. 'this permission to "login_proctor".',
		  type => 'permission'
		},
	],
	[
		x('Problem Display/Answer Checking'),
		{
			var  => 'pg{displayModes}',
			doc  => x('List of display modes made available to students'),
			doc2 => x(
				'<p>When viewing a problem, users may choose different methods of rendering formulas via an options '
					. 'box in the left panel. Here, you can adjust what display modes are listed.</p><p>Some display '
					. 'modes require other software to be installed on the server. Be sure to check that all display '
					. 'modes selected here work from your server.</p><p>The display modes are</p><ul><li>plainText: '
					. 'shows the raw LaTeX strings for formulas.</li><li>images: produces images using the external '
					. 'programs LaTeX and dvipng.</li><li>MathJax: a successor to jsMath, uses javascript to place '
					. 'render mathematics.</li></ul><p>You must use at least one display mode. If you select only '
					. 'one, then the options box will not give a choice of modes (since there will only be one active).'
					. '</p>'
			),
			min    => 1,
			values => [ "MathJax", "images", "plainText" ],
			type   => 'checkboxlist'
		},
		{
			var  => 'pg{options}{displayMode}',
			doc  => x('The default display mode'),
			doc2 =>
				x('Enter one of the allowed display mode types above.  See \'display modes entry\' for descriptions.'),
			min    => 1,
			values => [qw(MathJax images plainText)],
			type   => 'popuplist'
		},
		{
			var  => 'pg{specialPGEnvironmentVars}{entryAssist}',
			doc  => x('Assist with the student answer entry process.'),
			doc2 => x(
				'<p>MathQuill renders students answers in real-time as they type on the keyboard.</p><p>MathView '
					. 'allows students to choose from a variety of common math structures (such as fractions and '
					. 'square roots) as they attempt to input their answers.</p>'
			),
			min    => 1,
			values => [qw(None MathQuill MathView)],
			type   => 'popuplist'
		},
		{
			var  => 'pg{options}{showEvaluatedAnswers}',
			doc  => x('Display the evaluated student answer'),
			doc2 => x(
				'Set to true to display the "Entered" column which automatically shows the evaluated student answer, '
					. 'e.g., 1 if student input is sin(pi/2). If this is set to false, e.g., to save space in the '
					. 'response area, the student can still see their evaluated answer by clicking on the typeset '
					. 'version of their answer.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{ansEvalDefaults}{useBaseTenLog}',
			doc  => x('Use log base 10 instead of base <i>e</i>'),
			doc2 => x('Set to true for log to mean base 10 log and false for log to mean natural logarithm.'),
			type => 'boolean'
		},
		{
			var  => 'pg{specialPGEnvironmentVars}{useOldAnswerMacros}',
			doc  => x('Use older answer checkers'),
			doc2 => x(
				'<p>During summer 2005, a newer version of the answer checkers was implemented for answers which are '
					. 'functions and numbers.  The newer checkers allow more functions in student answers, and behave '
					. 'better in certain cases.  Some problems are specifically coded to use new (or old) answer '
					. 'checkers.  However, for the bulk of the problems, you can choose what the default will be here.'
					. '</p><p>Choosing <i>false</i> here means that the newer answer checkers will be used by default, '
					. 'and choosing <i>true</i> means that the old answer checkers will be used by default.</p>'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{specialPGEnvironmentVars}{parseAlternatives}',
			doc  => x('Allow Unicode alternatives in student answers'),
			doc2 => x(
				'Set to true to allow students to enter Unicode versions of some characters (like U+2212 for the '
					. 'minus sign) in their answers.  One reason to allow this is that copying and pasting output '
					. 'from MathJax can introduce these characters, but it is also getting easier to enter these '
					. 'characters directory from the keyboard.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{specialPGEnvironmentVars}{convertFullWidthCharacters}',
			doc  => x('Automatically convert Full Width Unicode characters to their ASCII equivalents'),
			doc2 => x(
				'Set to true to have Full Width Unicode character (U+FF01 to U+FF5E) converted to their ASCII '
					. 'equivalents (U+0021 to U+007E) automatically in MathObjects.  This may be valuable for Chinese '
					. 'keyboards, for example, that automatically use Full Width characters for parentheses and '
					. 'commas.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{ansEvalDefaults}{numRelPercentTolDefault}',
			doc  => x('Allowed error, as a percentage, for numerical comparisons'),
			doc2 => x(
				'When numerical answers are checked, most test if the student\'s answer is close enough to the '
					. 'programmed answer be computing the error as a percentage of the correct answer.  This value '
					. 'controls the default for how close the student answer has to be in order to be marked correct.'
					. '<p>A value such as 0.1 means 0.1 percent error is allowed.</p>'
			),
			type => 'number'
		},
		{
			var  => 'pg{specialPGEnvironmentVars}{waiveExplanations}',
			doc  => x('Skip explanation essay answer fields'),
			doc2 => x(
				'Some problems have an explanation essay answer field, typically following a simpler answer field. '
					. 'For example, find a certain derivative using the definition. An answer blank would be present '
					. 'for the derivative to be automatically checked, and then there would be a separate essay answer '
					. 'field to show the steps of actually using the definition of the derivative, to be scored '
					. 'manually. With this setting, the essay explanation fields are supperessed. Instructors may '
					. 'use the exercise without incurring the manual grading.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{options}{showHintsAfter}',
			doc  => x('Default number of attempts before hints are shown in a problem (-1 => hide hints)'),
			doc2 => x(
				'This is the default number of attempts a student must make before hints will be shown to the student. '
					. 'Set this to -1 to hide hints.  Note that this can be overridden with a per problem setting.'
			),
			type => 'number'
		},
		{
			var  => 'problemGraderScore',
			doc  => x('Method to enter problem scores in the single problem manual grader'),
			doc2 => x(
				'This configures if the single problem manual grader has inputs to enter problem scores as a percent, '
					. 'a point value, or both. Note, the problem score is always saved as a percent, so when '
					. 'using a point value, the problem score will be rounded to the nearest whole percent.'
			),
			values => [qw(Percent Point Both)],
			type   => 'popuplist'
		},
		{
			var => 'pg{options}{enterKey}',
			doc => x('Enter Key Behavior'),
			doc2 => x(
				'If this is set to "preview", hitting the enter key on a homework problem page activates the "Preview '
					. 'My Answers" button.  If this is set to "submit", then the enter key activates the "Submit '
					. 'Answers" button instead.  Or if that button is not present, it will activate the "Check '
					. 'Answers" button.  Or if that button is also not present, it will activate the "Preview My '
					. 'Answers" button.  A third option is "conservative". In this case, the enter key behaves like '
					. '"preview" when the "Submit" button is available and there are only finitely many attempts '
					. 'allowed.  Otherise the enter key behaves like "submit".  Note that this is only affects '
					. 'homework problem pages, not test/quiz pages, and not instructor pages like the PG Editor '
					. 'and the Library Browser.'
			),
			type => 'popuplist',
			values => ['preview', 'submit', 'conservative']
		},
		{
			var  => 'pg{options}{automaticAnswerFeedback}',
			doc  => x('Show automatic answer feedback'),
			doc2 => x(
				'Answer feedback will be available in problems when returning to a previously worked problem and '
					. 'after answers are available. Students will not need to click "Submit Answers" to make this '
					. 'feedback appear. Furthermore, the $showPartialCorrectAnswers variable set in some problems '
					. 'that prevents showing which of the answers are correct is ignored after the answer date.'
			),
			type => 'boolean'
		},
		{
			var  => 'pg{options}{correctRevealBtnAlways}',
			doc  => x('Show correct answer "Reveal" button always'),
			doc2 => x(
				'A "Reveal" button must be clicked to make a correct answer visible any time that correct answers for '
					. ' a problem are shown. Note that this is always the case for instructors before answers are '
					. ' available to students, and in "Show Me Another" problems.'
			),
			type => 'boolean'
		}
	],
	[
		x('E-Mail'),
		{
			var  => 'mail{feedbackSubjectFormat}',
			doc  => x('Format for the subject line in feedback emails'),
			doc2 => x(
				'When students click the <em>Email Instructor</em> button to send feedback, WeBWorK fills in the '
					. 'subject line.  Here you can set the subject line.  In it, you can have various bits of '
					. 'information filled in with the following escape sequences.<p><ul><li>%c = course ID</li>'
					. '<li>%u = user ID</li><li>%s = set ID</li><li>%p = problem ID</li><li>%x = section</li>'
					. '<li>%r = recitation</li><li>%% = literal percent sign</li></ul>'
			),
			width => 45,
			type  => 'text'
		},
		{
			var  => 'mail{feedbackVerbosity}',
			doc  => x('E-mail verbosity level'),
			doc2 => x(
				'The email verbosity level controls how much information is automatically added to feedback emails.  '
					. 'Levels are<ol><li> Simple: send only the feedback comment and context link</li>'
					. '<li> Standard: as in Simple, plus user, set, problem, and PG data</li>'
					. '<li> Debug: as in Standard, plus the problem environment (debugging data)</li>'
					. '</ol>'
			),
			labels => {
				'0' => 'Simple',
				'1' => 'Standard',
				'2' => 'Debug'
			},
			values => [qw(0 1 2)],
			type   => 'popuplist'

		},
		{
			var  => 'permissionLevels{receive_feedback}',
			doc  => x('Permission levels for receiving feedback email'),
			doc2 => x(
				'Users with these permission levels will be sent feedback emails from students when they use the '
					. 'feedback button.'
			),
			type => 'permission_checkboxlist',
		},
		{
			var  => 'mail{feedbackRecipients}',
			doc  => x('Additional addresses for receiving feedback email'),
			doc2 => x(
				'By default, feedback is sent to all users above who have permission to receive feedback. Feedback '
					. 'is also sent to any addresses specified here. Separate email address entries with commas.'
			),
			type => 'list'
		},
		{
			var  => 'feedback_by_section',
			doc  => x('Feedback by Section.'),
			doc2 => x(
				'By default, feedback is always sent to all users specified to recieve feedback.  This variable sets '
					. 'the system to only email feedback to users who have the same section as the user initiating the '
					. 'feedback.  I.e., feedback will only be sent to section leaders.'
			),
			type => 'boolean'
		},
	],
];

include('conf/LTIConfigValues.config');

1; #final line of the file to reassure perl that it was read properly.
