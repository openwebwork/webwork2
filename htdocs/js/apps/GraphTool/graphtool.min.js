"use strict";function graphTool(o,t){if(!document.getElementById(o+"_graph")){var e=$("#"+o);if("0px"!=e.css("width")){var b={curveColor:"#0000a6",focusCurveColor:"#0000f5",fillColor:"#a384e5",pointColor:"orange",pointHighlightColor:"yellow",underConstructionColor:"orange"};b.snapSizeX=t.snapSizeX?t.snapSizeX:1,b.snapSizeY=t.snapSizeY?t.snapSizeY:1,b.isStatic="isStatic"in t&&t.isStatic;var i=t.availableTools?t.availableTools:["LineTool","CircleTool","VerticalParabolaTool","HorizontalParabolaTool","FillTool","SolidDashTool"];b.fillIcon="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+b.fillColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E",b.fillIconFocused="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' id='SVGRoot' version='1.1' viewBox='0 0 32 32' height='32px' width='32px'%3E%3Cdefs id='defs815' /%3E%3Cmetadata id='metadata818'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Cdc:title%3E%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cg id='layer1'%3E%3Cpath id='path1382' d='m 13.466084,10.267728 -4.9000003,8.4 4.9000003,4.9 8.4,-4.9 z' style='opacity:1;fill:"+b.pointHighlightColor.replace(/#/,"%23")+";fill-opacity:1;stroke:%23000000;stroke-width:1.3;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none' /%3E%3Cpath id='path1384' d='M 16.266084,15.780798 V 6.273173' style='fill:none;stroke:%23000000;stroke-width:1.38;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1' /%3E%3Cpath id='path1405' d='m 20,16 c 0,0 2,-1 3,0 1,0 1,1 2,2 0,1 0,2 0,3 0,1 0,2 0,2 0,0 -1,0 -1,0 -1,-1 -1,-1 -1,-2 0,-1 0,-1 -1,-2 0,-1 0,-2 -1,-2 -1,-1 -2,-1 -1,-1 z' style='fill:%230900ff;fill-opacity:1;stroke:%23000000;stroke-width:0.7px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1' /%3E%3C/g%3E%3C/svg%3E","htmlInputId"in t&&(b.html_input=document.getElementById(t.htmlInputId));var r={showCopyright:!1,pan:{enabled:!1},zoom:{enabled:!1},showNavigation:!1,boundingBox:[-10,10,10,-10],defaultAxes:{},axis:{ticks:{label:{highlight:!1},insertTicks:!1,ticksDistance:2,minorTicks:1,minorHeight:6,majorHeight:6,tickEndings:[1,1]},highlight:!1,firstArrow:{size:7},lastArrow:{size:7},straightFirst:!1,straightLast:!1},grid:{gridX:b.snapSizeX,gridY:b.snapSizeY}};"JSXGraphOptions"in t&&$.extend(!0,r,r,t.JSXGraphOptions),b.snapRound=function(t,o){return Math.round(Math.round(t/o)*o*1e5)/1e5},b.setTextCoords=function(t,o){b.current_pos_text.setText("("+b.snapRound(t,b.snapSizeX)+", "+b.snapRound(o,b.snapSizeY)+")")},b.updateText=function(){b.html_input.value=b.graphedObjs.reduce(function(t,o){return t+(t.length?",":"")+"{"+o.stringify()+"}"},"")},b.getMouseCoords=function(t){var o;t[JXG.touchProperty]&&(o=0);var e=b.board.getCoordsTopLeftCorner(),i=JXG.getPosition(t,o),r=i[0]-e[0],n=i[1]-e[1];return new JXG.Coords(JXG.COORDS_BY_SCREEN,[r,n],b.board)},b.sign=function(t){return t=+t,Math.abs(t)<JXG.Math.eps?0:0<t?1:-1},b.pointRegexp=/\( *(-?[0-9]*(?:\.[0-9]*)?), *(-?[0-9]*(?:\.[0-9]*)?) *\)/g,b.pairedPointDrag=function(t){if(this.X()==this.paired_point.X()&&this.Y()==this.paired_point.Y()){var o=b.getMouseCoords(t),e=o.usrCoords[1]-this.paired_point.X(),i=o.usrCoords[2]-this.paired_point.Y();i>Math.abs(e)?this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()+b.snapSizeY]):e>Math.abs(i)?this.setPosition(JXG.COORDS_BY_USER,[this.X()+b.snapSizeX,this.Y()]):e<-Math.abs(i)?this.setPosition(JXG.COORDS_BY_USER,[this.X()-b.snapSizeX,this.Y()]):this.setPosition(JXG.COORDS_BY_USER,[this.X(),this.Y()-b.snapSizeY])}b.updateObjects(),b.updateText()},b.pairedPointDragRestricted=function(t){var o=b.getMouseCoords(t),e=this.X(),i=this.Y();this.X()==this.paired_point.X()&&(o.usrCoords[1]>this.paired_point.X()?e+=b.snapSizeX:e-=b.snapSizeX),this.Y()==this.paired_point.Y()&&(o.usrCoords[2]>this.paired_point.Y()?i+=b.snapSizeX:i-=b.snapSizeX),this.X()!=this.paired_point.X()&&this.Y()!=this.paired_point.Y()||this.setPosition(JXG.COORDS_BY_USER,[e,i]),b.updateObjects(),b.updateText()},b.createPoint=function(t,o,e,i){var r=b.board.create("point",[t,o],{size:2,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1});return r.on("down",function(){b.board.containerObj.style.cursor="none"}),r.on("up",function(){b.board.containerObj.style.cursor="auto"}),void 0!==e&&((r.paired_point=e).paired_point=r,e.on("drag",i?b.pairedPointDragRestricted:b.pairedPointDrag),r.on("drag",i?b.pairedPointDragRestricted:b.pairedPointDrag)),r},b.updateObjects=function(){b.graphedObjs.forEach(function(t){t.update()}),b.staticObjs.forEach(function(t){t.update()})},a.prototype.blur=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!1})}),this.baseObj.setAttribute({strokeColor:b.curveColor,strokeWidth:2})},a.prototype.focus=function(){Object.values(this.definingPts).forEach(function(t){t.setAttribute({visible:!0,strokeColor:b.focusCurveColor,strokeWidth:1,size:3,fillColor:b.pointColor,highlightStrokeColor:b.focusCurveColor,highlightFillColor:b.pointHighlightColor})}),this.baseObj.setAttribute({strokeColor:b.focusCurveColor,strokeWidth:3}),b.drawSolid=0==this.baseObj.getAttribute("dash"),"solidButton"in b&&b.solidButton.prop("disabled",b.drawSolid),"dashedButton"in b&&b.dashedButton.prop("disabled",!b.drawSolid)},a.prototype.update=function(){},a.prototype.fillCmp=function(t){return 1},a.prototype.remove=function(){Object.values(this.definingPts).forEach(function(t){b.board.removeObject(t)}),b.board.removeObject(this.baseObj)},a.prototype.setSolid=function(t){this.baseObj.setAttribute({dash:t?0:2})},a.prototype.stringify=function(){return""},a.prototype.id=function(){return this.baseObj.id},a.prototype.on=function(t,o,e){this.baseObj.on(t,o,e)},a.prototype.off=function(t,o){this.baseObj.off(t,o)},a.prototype.onResize=function(){},a.prototype.updateTextCoords=function(o){return!Object.keys(this.definingPts).every(function(t){return!this[t].hasPoint(o.scrCoords[1],o.scrCoords[2])||(b.setTextCoords(this[t].X(),this[t].Y()),!1)},this.definingPts)},a.restore=function(t){var o=t.match(/^(.*?),(.*)/);if(o.length<3)return!1;var e=!1;return Object.keys(b.graphObjectTypes).every(function(t){return o[1]!=b.graphObjectTypes[t].strId||(e=b.graphObjectTypes[t].restore(o[2]),!1)}),!1!==e&&e.blur(),e},d.prototype=Object.create(a.prototype),Object.defineProperty(d.prototype,"constructor",{value:d,enumerable:!1,writable:!0}),d.prototype.stringify=function(){return[d.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+b.snapRound(this.definingPts.point1.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.point1.Y(),b.snapSizeY)+")","("+b.snapRound(this.definingPts.point2.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.point2.Y(),b.snapSizeY)+")"].join(",")},d.prototype.fillCmp=function(t){return b.sign(JXG.Math.innerProduct(t,this.baseObj.stdform))},d.strId="line",d.restore=function(t){for(var o,e=[];o=b.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=b.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=b.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new b.graphObjectTypes.line(i,r,/solid/.test(t),b.curveColor)},l.prototype=Object.create(a.prototype),Object.defineProperty(l.prototype,"constructor",{value:l,enumerable:!1,writable:!0}),l.prototype.stringify=function(){return[l.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed","("+b.snapRound(this.definingPts.center.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.center.Y(),b.snapSizeY)+")","("+b.snapRound(this.definingPts.point.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.point.Y(),b.snapSizeY)+")"].join(",")},l.prototype.fillCmp=function(t){return b.sign(this.baseObj.stdform[3]*(t[1]*t[1]+t[2]*t[2])+JXG.Math.innerProduct(t,this.baseObj.stdform))},l.strId="circle",l.restore=function(t){for(var o,e=[];o=b.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=b.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=b.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i);return new b.graphObjectTypes.circle(i,r,/solid/.test(t),b.curveColor)},u.prototype=Object.create(a.prototype),Object.defineProperty(u.prototype,"constructor",{value:u,enumerable:!1,writable:!0}),u.prototype.stringify=function(){return[u.strId,0==this.baseObj.getAttribute("dash")?"solid":"dashed",this.vertical?"vertical":"horizontal","("+b.snapRound(this.definingPts.vertex.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.vertex.Y(),b.snapSizeY)+")","("+b.snapRound(this.definingPts.point.X(),b.snapSizeX)+","+b.snapRound(this.definingPts.point.Y(),b.snapSizeY)+")"].join(",")},u.prototype.fillCmp=function(t){return this.vertical?b.sign(t[2]-this.baseObj.Y(t[1])):b.sign(t[1]-this.baseObj.X(t[2]))},u.strId="parabola",u.restore=function(t){for(var o,e=[];o=b.pointRegexp.exec(t);)e.push(o.slice(1,3));if(e.length<2)return!1;var i=b.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])),r=b.createPoint(parseFloat(e[1][0]),parseFloat(e[1][1]),i,!0);return new b.graphObjectTypes.parabola(i,r,/vertical/.test(t),/solid/.test(t),b.curveColor)},h.prototype=Object.create(a.prototype),Object.defineProperty(h.prototype,"constructor",{value:h,enumerable:!1,writable:!0}),h.prototype.blur=function(){this.focused=!1,this.definingPts.icon.setAttribute({fixed:!0})},h.prototype.focus=function(){this.focused=!0,this.definingPts.icon.setAttribute({fixed:!1})},h.prototype.on=function(t,o,e){this.definingPts.icon.on(t,o,e)},h.prototype.off=function(t,o){this.definingPts.icon.off(t,o)},h.prototype.remove=function(){"fillObj"in this&&b.board.removeObject(this.fillObj),a.prototype.remove.call(this)},h.prototype.update=function(){if(!this.isStatic){this.updateTimeout&&clearTimeout(this.updateTimeout);var h=this;this.updateTimeout=setTimeout(function(){h.updateTimeout=0,"fillObj"in h&&(b.board.removeObject(h.fillObj),delete h.fillObj);for(var t=h.definingPts.point.coords.usrCoords,r=b.graphedObjs.concat(b.staticObjs),n=Array(r.length),o=0;o<r.length;++o)if(n[o]=r[o].fillCmp(t),0==n[o])return;var e=document.createElement("canvas");e.width=b.board.canvasWidth,e.height=b.board.canvasHeight;for(var i,s=e.getContext("2d"),a=s.getImageData(0,0,e.width,e.height),d=function(t,o){for(var e=[1,(t-b.board.origin.scrCoords[1])/b.board.unitX,(b.board.origin.scrCoords[2]-o)/b.board.unitY],i=0;i<r.length;++i)if(r[i].fillCmp(e)!=n[i])return!1;return!0},l=0;l<e.width;++l)for(var p=0;p<e.height;++p)d(l,p)&&(i=4*(p*e.width+l),a.data[i]=Number("0x"+b.fillColor.slice(1,3)),a.data[i+1]=Number("0x"+b.fillColor.slice(3,5)),a.data[i+2]=Number("0x"+b.fillColor.slice(5)),a.data[i+3]=255);s.putImageData(a,0,0);var c=e.toDataURL("image/png");e.remove();var u=b.board.getBoundingBox();h.fillObj=b.board.create("image",[c,[u[0],u[3]],[u[2]-u[0],u[1]-u[3]]],{withLabel:!1,highlight:!1,fixed:!0,layer:0})},100)}},h.prototype.onResize=function(){this.definingPts.icon.setPosition(JXG.COORDS_BY_USER,[this.definingPts.point.X()-12/b.board.unitX,this.definingPts.point.Y()-12/b.board.unitY]),b.board.update()},h.prototype.updateTextCoords=function(t){return!!this.definingPts.point.hasPoint(t.scrCoords[1],t.scrCoords[2])&&(b.setTextCoords(this.definingPts.point.X(),this.definingPts.point.Y()),!0)},h.prototype.stringify=function(){return[h.strId,"("+b.snapRound(this.baseObj.X(),b.snapSizeX)+","+b.snapRound(this.baseObj.Y(),b.snapSizeY)+")"].join(",")},h.strId="fill",h.restore=function(t){for(var o,e=[];o=b.pointRegexp.exec(t);)e.push(o.slice(1,3));return!!e.length&&new b.graphObjectTypes.fill(b.createPoint(parseFloat(e[0][0]),parseFloat(e[0][1])))},b.graphObjectTypes={},b.graphObjectTypes[d.strId]=d,b.graphObjectTypes[u.strId]=u,b.graphObjectTypes[l.strId]=l,b.graphObjectTypes[h.strId]=h,"customGraphObjects"in t&&Object.keys(t.customGraphObjects).forEach(function(t){var o,i=this[t],e="parent"in i?i.parent?b.graphObjectTypes[i.parent]:null:a;e?((o=function(){"preInit"in i?e.call(this,i.preInit.apply(this,[b].concat(Array.prototype.slice.call(arguments)))):e.apply(this,arguments),"postInit"in i&&i.postInit.apply(this,[b].concat(Array.prototype.slice.call(arguments)))}).prototype=Object.create(e.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){i.preInit.apply(this,[b].concat(Array.prototype.slice.call(arguments)))},"blur"in i&&(o.prototype.blur=function(){i.blur.call(this,b)&&e&&e.prototype.blur.call(this)}),"focus"in i&&(o.prototype.focus=function(){i.focus.call(this,b)&&e&&e.prototype.focus.call(this)}),"update"in i&&(o.prototype.update=function(){i.update.call(this,b)}),"onResize"in i&&(o.prototype.onResize=function(){i.onResize.call(this,b)}),"updateTextCoords"in i&&(o.prototype.updateTextCoords=function(t){return i.updateTextCoords.call(this,b,t)}),"fillCmp"in i&&(o.prototype.fillCmp=function(t){return i.fillCmp.call(this,b,t)}),"remove"in i&&(o.prototype.remove=function(){i.remove.call(this,b),e&&e.prototype.remove.call(this)}),"setSolid"in i&&(o.prototype.setSolid=function(t){i.setSolid.call(this,b,t)}),"on"in i&&(o.prototype.on=function(t,o,e){i.on.call(this,t,o,e)}),"off"in i&&(o.prototype.off=function(t,o){i.off.call(this,t,o)}),"stringify"in i&&(o.prototype.stringify=function(){return[o.strId,i.stringify.call(this,b)].join(",")}),"restore"in i?o.restore=function(t){return i.restore.call(this,b,t)}:e&&(o.restore=e.restore),"helperMethods"in i&&Object.keys(i.helperMethods).forEach(function(t){o[t]=function(){return i.helperMethods[t].apply(this,[b].concat(Array.prototype.slice.call(arguments)))}}),o.strId=t,b.graphObjectTypes[o.strId]=o},t.customGraphObjects),f.prototype.activate=function(){b.activeTool.deactivate(),(b.activeTool=this).button.blur(),this.button.prop("disabled",!0),b.selectedObj&&b.selectedObj.blur(),b.selectedObj=null},f.prototype.finish=function(){b.updateObjects(),b.updateText(),b.board.update(),b.selectTool.activate()},f.prototype.updateHighlights=function(t){return!1},f.prototype.removeHighlights=function(){Object.keys(this.hlObjs).forEach(function(t){b.board.removeObject(this[t]),delete this[t]},this.hlObjs)},f.prototype.deactivate=function(){this.button.prop("disabled",!1),this.removeHighlights()},g.prototype=Object.create(f.prototype),Object.defineProperty(g.prototype,"constructor",{value:g,enumerable:!1,writable:!0}),g.prototype.selectionChanged=function(t){if(b.selectedObj){if(b.selectedObj.id()==this.gtGraphObject.id())return;for(var o=b.getMouseCoords(t),e=Object.values(b.selectedObj.definingPts),i=0;i<e.length;++i)if(e[i].X()==b.snapRound(o.usrCoords[1],b.snapSizeX)&&e[i].Y()==b.snapRound(o.usrCoords[2],b.snapSizeY))return;b.selectedObj.blur()}b.selectedObj=this.gtGraphObject,b.selectedObj.focus()},g.prototype.activate=function(t){var o=b.selectedObj;f.prototype.activate.call(this),o&&(b.selectedObj=o),t||1!=b.graphedObjs.length||(b.selectedObj=b.graphedObjs[0]),b.selectedObj&&b.selectedObj.focus(),b.graphedObjs.forEach(function(t){t.on("down",this.selectionChanged)},this)},g.prototype.deactivate=function(){b.graphedObjs.forEach(function(t){t.off("down",this.selectionChanged)},this),f.prototype.deactivate.call(this)},y.prototype=Object.create(f.prototype),Object.defineProperty(y.prototype,"constructor",{value:y,enumerable:!1,writable:!0}),y.prototype.updateHighlights=function(t){return"hl_line"in this.hlObjs&&this.hlObjs.hl_line.setAttribute({dash:b.drawSolid?0:2}),void 0!==t&&(!("point1"in this&&b.snapRound(t.usrCoords[1],b.snapSizeX)==this.point1.X()&&b.snapRound(t.usrCoords[2],b.snapSizeY)==this.point1.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=b.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:b.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1}),"point1"in this&&(this.hlObjs.hl_line=b.board.create("line",[this.point1,this.hlObjs.hl_point],{fixed:!0,strokeColor:b.underConstructionColor,highlight:!1,dash:b.drawSolid?0:2}))),b.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),b.board.update(),!0))},y.prototype.deactivate=function(){b.board.off("up"),"point1"in this&&b.board.removeObject(this.point1),delete this.point1,b.board.containerObj.style.cursor="auto",f.prototype.deactivate.call(this)},y.prototype.activate=function(){f.prototype.activate.call(this),b.board.containerObj.style.cursor="none";var e=this;b.board.on("up",function(t){var o=b.getMouseCoords(t);b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(b.board.off("up"),e.point1=b.board.create("point",[o.usrCoords[1],o.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1}),e.point1.setAttribute({fixed:!0}),e.removeHighlights(),b.board.on("up",function(t){var o=b.getMouseCoords(t);e.point1.X()==b.snapRound(o.usrCoords[1],b.snapSizeX)&&e.point1.Y()==b.snapRound(o.usrCoords[2],b.snapSizeY)||!b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])||(b.board.off("up"),e.point1.setAttribute({fixed:!1}),e.point1.on("down",function(){b.board.containerObj.style.cursor="none"}),e.point1.on("up",function(){b.board.containerObj.style.cursor="auto"}),b.selectedObj=new b.graphObjectTypes.line(e.point1,b.createPoint(o.usrCoords[1],o.usrCoords[2],e.point1),b.drawSolid),b.graphedObjs.push(b.selectedObj),delete e.point1,e.finish())}),b.board.update())})},O.prototype=Object.create(f.prototype),Object.defineProperty(O.prototype,"constructor",{value:O,enumerable:!1,writable:!0}),O.prototype.updateHighlights=function(t){return"hl_circle"in this.hlObjs&&this.hlObjs.hl_circle.setAttribute({dash:b.drawSolid?0:2}),void 0!==t&&(!("center"in this&&b.snapRound(t.usrCoords[1],b.snapSizeX)==this.center.X()&&b.snapRound(t.usrCoords[2],b.snapSizeY)==this.center.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=b.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:b.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1}),"center"in this&&(this.hlObjs.hl_circle=b.board.create("circle",[this.center,this.hlObjs.hl_point],{fixed:!0,strokeColor:b.underConstructionColor,highlight:!1,dash:b.drawSolid?0:2}))),b.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),b.board.update(),!0))},O.prototype.deactivate=function(){b.board.off("up"),"center"in this&&b.board.removeObject(this.center),delete this.center,b.board.containerObj.style.cursor="auto",f.prototype.deactivate.call(this)},O.prototype.activate=function(){f.prototype.activate.call(this),b.board.containerObj.style.cursor="none";var e=this;b.board.on("up",function(t){var o=b.getMouseCoords(t);b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(b.board.off("up"),e.center=b.board.create("point",[o.usrCoords[1],o.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1}),e.center.setAttribute({fixed:!0}),e.removeHighlights(),b.board.on("up",function(t){var o=b.getMouseCoords(t);e.center.X()==b.snapRound(o.usrCoords[1],b.snapSizeX)&&e.center.Y()==b.snapRound(o.usrCoords[2],b.snapSizeY)||!b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])||(b.board.off("up"),e.center.setAttribute({fixed:!1}),e.center.on("down",function(){b.board.containerObj.style.cursor="none"}),e.center.on("up",function(){b.board.containerObj.style.cursor="auto"}),b.selectedObj=new b.graphObjectTypes.circle(e.center,b.createPoint(o.usrCoords[1],o.usrCoords[2],e.center),b.drawSolid),b.graphedObjs.push(b.selectedObj),delete e.center,e.finish())}),b.board.update())})},v.prototype=Object.create(f.prototype),Object.defineProperty(v.prototype,"constructor",{value:v,enumerable:!1,writable:!0}),v.prototype.updateHighlights=function(t){return"hl_parabola"in this.hlObjs&&this.hlObjs.hl_parabola.setAttribute({dash:b.drawSolid?0:2}),void 0!==t&&((!("vertex"in this)||b.snapRound(t.usrCoords[1],b.snapSizeX)!=this.vertex.X()&&b.snapRound(t.usrCoords[2],b.snapSizeY)!=this.vertex.Y())&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[t.usrCoords[1],t.usrCoords[2]]):(this.hlObjs.hl_point=b.board.create("point",[t.usrCoords[1],t.usrCoords[2]],{size:2,color:b.underConstructionColor,fixed:!0,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,highlight:!1,withLabel:!1}),"vertex"in this&&(this.hlObjs.hl_parabola=c(this.vertex,this.hlObjs.hl_point,this.vertical,b.drawSolid,b.underConstructionColor))),b.setTextCoords(this.hlObjs.hl_point.X(),this.hlObjs.hl_point.Y()),b.board.update(),!0))},v.prototype.deactivate=function(){b.board.off("up"),"vertex"in this&&b.board.removeObject(this.vertex),delete this.vertex,b.board.containerObj.style.cursor="auto",f.prototype.deactivate.call(this)},v.prototype.activate=function(){f.prototype.activate.call(this),b.board.containerObj.style.cursor="none";var e=this;b.board.on("up",function(t){var o=b.getMouseCoords(t);b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(b.board.off("up"),e.vertex=b.board.create("point",[o.usrCoords[1],o.usrCoords[2]],{size:2,snapToGrid:!0,snapSizeX:b.snapSizeX,snapSizeY:b.snapSizeY,withLabel:!1}),e.vertex.setAttribute({fixed:!0}),e.removeHighlights(),b.board.on("up",function(t){var o=b.getMouseCoords(t);e.vertex.X()!=b.snapRound(o.usrCoords[1],b.snapSizeX)&&e.vertex.Y()!=b.snapRound(o.usrCoords[2],b.snapSizeY)&&b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(b.board.off("up"),e.vertex.setAttribute({fixed:!1}),e.vertex.on("down",function(){b.board.containerObj.style.cursor="none"}),e.vertex.on("up",function(){b.board.containerObj.style.cursor="auto"}),b.selectedObj=new b.graphObjectTypes.parabola(e.vertex,b.createPoint(o.usrCoords[1],o.usrCoords[2],e.vertex,!0),e.vertical,b.drawSolid),b.graphedObjs.push(b.selectedObj),delete e.vertex,e.finish())}),b.board.update())})},j.prototype=Object.create(v.prototype),Object.defineProperty(j.prototype,"constructor",{value:j,enumerable:!1,writable:!0}),C.prototype=Object.create(v.prototype),Object.defineProperty(C.prototype,"constructor",{value:C,enumerable:!1,writable:!0}),m.prototype=Object.create(f.prototype),Object.defineProperty(m.prototype,"constructor",{value:m,enumerable:!1,writable:!0}),m.prototype.updateHighlights=function(t){return void 0!==t&&("hl_point"in this.hlObjs?this.hlObjs.hl_point.setPosition(JXG.COORDS_BY_USER,[b.snapRound(t.usrCoords[1],b.snapSizeX)-12/b.board.unitX,b.snapRound(t.usrCoords[2],b.snapSizeY)-12/b.board.unitY]):this.hlObjs.hl_point=b.board.create("image",[b.fillIcon,[b.snapRound(t.usrCoords[1],b.snapSizeX)-12/b.board.unitX,b.snapRound(t.usrCoords[2],b.snapSizeY)-12/b.board.unitY],[24/b.board.unitX,24/b.board.unitY]],{withLabel:!1,highlight:!1,layer:9}),b.setTextCoords(t.usrCoords[1],t.usrCoords[2]),b.board.update(),!0)},m.prototype.deactivate=function(){b.board.off("up"),b.board.containerObj.style.cursor="auto",f.prototype.deactivate.call(this)},m.prototype.activate=function(){f.prototype.activate.call(this),b.board.containerObj.style.cursor="none",b.board.on("up",function(t){b.board.off("up");var o=b.getMouseCoords(t);b.board.hasPoint(o.usrCoords[1],o.usrCoords[2])&&(b.board.off("up"),b.selectedObj=new b.graphObjectTypes.fill(b.createPoint(o.usrCoords[1],o.usrCoords[2])),b.graphedObjs.push(b.selectedObj),b.updateText(),b.board.update(),b.selectTool.activate())})},b.toolTypes={LineTool:y,CircleTool:O,VerticalParabolaTool:j,HorizontalParabolaTool:C,FillTool:m,SolidDashTool:function(t){var o=$("<div class='gt-solid-dash-box'></div>");b.solidButton=$("<button type=button class='btn gt-button gt-tool-button gt-solid-tool' data-toggle='tooltip' title='Make Selected Object Solid' disabled>&nbsp;</button>").on("click",{solid:!0},S),o.append(b.solidButton),b.dashedButton=$("<button type=button class='btn gt-button gt-tool-button gt-dashed-tool' data-toggle='tooltip' title='Make Selected Object Dashed'>&nbsp;</button>").on("click",{solid:!1},S),o.append(b.dashedButton),t.append(o)}};var n=$("<div id='"+o+"_graph' class='jxgbox graphtool-graph'></div>");if(e.append(n),!b.isStatic){var s=$("<div class='gt-toolbar-container'></div>");b.selectTool=new g(s),"customTools"in t&&Object.keys(t.customTools).forEach(function(t){var o,e=this[t],i="parent"in e?e.parent?b.toolTypes[e.parent]:null:f;i?((o=function(t){i.call(this,t,e.iconName,e.tooltip),"initialize"in e&&e.initialize.call(this,b,t)}).prototype=Object.create(i.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,enumerable:!1,writable:!0})):o=function(){e.initialize.call(this,b,container)},"activate"in e&&(o.prototype.activate=function(){i.prototype.activate.call(this),e.activate.call(this,b)}),"deactivate"in e&&(o.prototype.deactivate=function(){e.deactivate.call(this,b),i.prototype.deactivate.call(this)}),"updateHighlights"in e&&(o.prototype.updateHighlights=function(t){return e.updateHighlights.call(this,b,t)}),"removeHighlights"in e&&(o.prototype.removeHighlights=function(){e.removeHighlights.call(this,b),i.prototype.removeHighlights.call(this)}),"helperMethods"in e&&Object.keys(e.helperMethods).forEach(function(t){o[t]=function(){return e.helperMethods[t].apply(this,[b].concat(Array.prototype.slice.call(arguments)))}}),b.toolTypes[t]=o},t.customTools),i.forEach(function(t){t in b.toolTypes?new b.toolTypes[t](s):console.log("Unknown tool: "+t)}),s.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Delete Selected Object'>Delete</button>").on("click",function(){if(this.blur(),b.selectedObj){var o=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="deleteObjectDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="deleteObjectDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to delete the selected object?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-delete">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>');o.modal("show"),$(".modal-backdrop").css("opacity","0.2"),o.on("hidden",function(){o.remove()}),$("#gt-confirm-delete").on("click",function(){for(var t=0;t<b.graphedObjs.length;++t)if(b.graphedObjs[t].id()===b.selectedObj.id()){b.graphedObjs[t].remove(),b.graphedObjs.splice(t,1);break}b.selectedObj=null,b.updateObjects(),b.updateText(),o.modal("hide")})}})),s.append($("<button type=button class='btn gt-button' data-toggle='tooltip' title='Clear All Objects From Graph'>Clear</button>").on("click",function(){if(this.blur(),0!=b.graphedObjs.length){var t=$('<div class="modal" tabindex="-1" role="dialog" aria-labelledby="clearGraphDialog" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="clearGraphDialog">Delete Selected Object</h3></div><div class="modal-body"><div>Do you want to remove all graphed objects?</div></div><div class="modal-footer"><button class="btn btn-primary" id="gt-confirm-clear">Yes</button><button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">No</button></div></div>');t.modal("show"),$(".modal-backdrop").css("opacity","0.2"),t.on("hidden",function(){t.remove()}),$("#gt-confirm-clear").on("click",function(){b.graphedObjs.forEach(function(t){t.remove()}),b.graphedObjs=[],b.selectedObj=null,b.selectTool.activate(),b.html_input.value="",t.modal("hide")})}})),e.append(s),$('.gt-button[data-toggle="tooltip"]').tooltip({trigger:"hover",placement:"bottom",delay:{show:1e3,hide:0}})}!function(){b.board=JXG.JSXGraph.initBoard(o+"_graph",r),b.board.suspendUpdate();var t=b.board.getBoundingBox();b.board.defaultAxes.x.point1.setPosition(JXG.COORDS_BY_USER,[t[0],0]),b.board.defaultAxes.x.point2.setPosition(JXG.COORDS_BY_USER,[t[2],0]),b.board.defaultAxes.y.point1.setPosition(JXG.COORDS_BY_USER,[0,t[3]]),b.board.defaultAxes.y.point2.setPosition(JXG.COORDS_BY_USER,[0,t[1]]),b.board.create("text",[function(){return b.board.getBoundingBox()[2]-3/b.board.unitX},function(){return 1.5/b.board.unitY},function(){return"\\(x\\)"}],{anchorX:"right",anchorY:"bottom",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),b.board.create("text",[function(){return 4.5/b.board.unitX},function(){return b.board.getBoundingBox()[1]+2.5/b.board.unitY},function(){return"\\(y\\)"}],{anchorX:"left",anchorY:"top",highlight:!1,color:"black",fixed:!0,useMathJax:!0}),b.current_pos_text=b.board.create("text",[function(){return b.board.getBoundingBox()[2]-5/b.board.unitX},function(){return b.board.getBoundingBox()[3]+5/b.board.unitY},""],{anchorX:"right",anchorY:"bottom",fixed:!0}),b.board.highlightInfobox=function(t,o,e){return b.board.highlightCustomInfobox("",e)},b.isStatic||(b.board.on("move",function(t){var o=b.getMouseCoords(t);b.activeTool.updateHighlights(o)||b.selectedObj&&b.selectedObj.updateTextCoords(o)||b.setTextCoords(o.usrCoords[1],o.usrCoords[2])}),$(document).on("keydown.ToolDeactivate",function(t){"Escape"===t.key&&b.selectTool.activate()})),$(window).resize(function(t){b.board.canvasWidth==n.width()&&b.board.canvasHeight==n.height()||(b.board.resizeContainer(n.width(),n.height(),!0),b.graphedObjs.forEach(function(t){t.onResize()}),b.staticObjs.forEach(function(t){t.onResize()}))}),b.drawSolid=!0,b.graphedObjs=[],b.staticObjs=[],b.selectedObj=null,b.board.unsuspendUpdate()}(),"html_input"in b&&x(b.html_input.value,!1),"staticObjects"in t&&"string"==typeof t.staticObjects&&t.staticObjects.length&&x(t.staticObjects,!0),b.isStatic||(b.updateText(),b.activeTool=b.selectTool,b.activeTool.activate(!0))}else setTimeout(function(){graphTool(o,t)},100)}function a(t){this.baseObj=t,(this.baseObj.gtGraphObject=this).definingPts={}}function d(t,o,e,i){a.call(this,b.board.create("line",[t,o],{fixed:!0,highlight:!1,strokeColor:i||b.underConstructionColor,dash:e?0:2})),this.definingPts.point1=t,this.definingPts.point2=o}function l(t,o,e,i){a.call(this,b.board.create("circle",[t,o],{fixed:!0,highlight:!1,strokeColor:i||b.underConstructionColor,dash:e?0:2})),this.definingPts.center=t,this.definingPts.point=o}function p(t,o,e){return e?(o.Y()-t.Y())/Math.pow(o.X()-t.X(),2):(o.X()-t.X())/Math.pow(o.Y()-t.Y(),2)}function c(o,e,i,t,r){return i?b.board.create("curve",[function(t){return t},function(t){return p(o,e,i)*Math.pow(t-o.X(),2)+o.Y()},function(){return b.board.getBoundingBox()[0]},function(){return b.board.getBoundingBox()[2]}],{strokeWidth:2,highlight:!1,strokeColor:r||b.underConstructionColor,dash:t?0:2}):b.board.create("curve",[function(t){return p(o,e,i)*Math.pow(t-o.Y(),2)+o.X()},function(t){return t},function(){return b.board.getBoundingBox()[3]},function(){return b.board.getBoundingBox()[1]}],{strokeWidth:2,highlight:!1,strokeColor:r||b.underConstructionColor,dash:t?0:2})}function u(t,o,e,i,r){a.call(this,c(t,o,e,i,r)),this.definingPts.vertex=t,this.definingPts.point=o,this.vertical=e}function h(t){t.setAttribute({visible:!1}),a.call(this,t),this.focused=!0,this.definingPts.point=t,this.updateTimeout=0,this.update();var r=this;this.definingPts.icon=b.board.create("image",[function(){return r.focused?b.fillIconFocused:b.fillIcon},[t.X()-12/b.board.unitX,t.Y()-12/b.board.unitY],[function(){return 24/b.board.unitX},function(){return 24/b.board.unitY}]],{withLabel:!1,highlight:!1,layer:9,name:"FillIcon"}),(this.definingPts.icon.gtGraphObject=this).definingPts.icon.point=t,this.isStatic=b.isStatic,b.isStatic||(this.on("down",function(){b.board.containerObj.style.cursor="none"}),this.on("up",function(){b.board.containerObj.style.cursor="auto"}),this.on("drag",function(t){var o=b.getMouseCoords(t),e=b.snapRound(o.usrCoords[1],b.snapSizeX),i=b.snapRound(o.usrCoords[2],b.snapSizeY);this.setPosition(JXG.COORDS_BY_USER,[e-12/b.board.unitX,i-12/b.board.unitY]),this.point.setPosition(JXG.COORDS_BY_USER,[e,i]),r.update(),b.updateText()}))}function f(t,o,e){this.button=$("<button type=button class='btn gt-button gt-tool-button gt-"+o+"-tool' data-toggle='tooltip' title='"+e+"'>&nbsp;</button>");var i=this;this.button.on("click",function(){i.activate()}),t.append(this.button),this.hlObjs={}}function g(t){f.call(this,t,"select","Object Selection Tool")}function y(t,o,e){f.call(this,t,o||"line",e||"Line Tool")}function O(t,o,e){f.call(this,t,o||"circle",e||"Circle Tool")}function v(t,o,e,i){f.call(this,t,e||(o?"vertical-parabola":"horizontal-parabola"),i||(o?"Vertical Parabola Tool":"Horizontal Parabola Tool")),this.vertical=o}function j(t,o,e){v.call(this,t,!0,o,e)}function C(t,o,e){v.call(this,t,!1,o,e)}function m(t,o,e){f.call(this,t,o||"fill",e||"Region Shading Tool")}function S(t){this.blur(),"solidButton"in b&&b.solidButton.prop("disabled",t.data.solid),"dashedButton"in b&&b.dashedButton.prop("disabled",!t.data.solid),b.selectedObj&&(b.selectedObj.setSolid(t.data.solid),b.updateText()),b.drawSolid=t.data.solid,b.activeTool.updateHighlights()}function x(t,o){b.board.suspendUpdate();var e=b.isStatic;b.isStatic=o;for(var i,r=/{(.*?)}/g;i=r.exec(t);){var n=a.restore(i[1]);!1!==n&&(o?b.staticObjs.push(n):b.graphedObjs.push(n))}b.isStatic=e,b.updateObjects(),b.board.unsuspendUpdate()}}Object.values||(Object.values=function(o){return Object.keys(o).map(function(t){return o[t]})});
